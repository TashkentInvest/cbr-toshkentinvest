(app={utils:{}}).utils.getDirection={direction:1,lastScrollTop:0,init:function(){var e=this;app.dom.$window.scroll(function(){var t=app.dom.$window.scrollTop();e.lastScrollTop!==t&&(e.lastScrollTop<t?e.direction=1:e.direction=-1,e.lastScrollTop=t)})}},app.findWithRoot=function(t,e){var t=$(t),a=t.find(e);return a=t.is(e)?a.add(t):a},app.formatNumber=function(t){return String(t).replace(/(?=\B(?:\d{3})+\b)/g," ")},app.declOfNum=function(t,e,a){e=e[4<t%100&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]];return a?t+" "+e:e},app.onPressSpace=function(e,a){app.dom.$window.on("keypress",function(t){32==t.keyCode&&e.is(document.activeElement)&&(t.preventDefault(),a)&&a.call(document.activeElement,t)})},app.createRunOnceTimeout=function(){var a;return function(t,e){clearTimeout(a),a=setTimeout(t,e)}},app.regionsMap=function(t,c){var e=app.findWithRoot(document,t);if(e.length){var p=e[0],u=p.querySelector(".map"),f=document.querySelector('[name="zoom:lang"]').getAttribute("content"),e=document.querySelector("[data-url-regions]");if(void 0===t||!u)throw p.style.display="none",new Error("Неверный id");e&&e.getAttribute("data-url-regions")&&$.getJSON(e.getAttribute("data-url-regions"),function(t){var o=t,e=t,i={},r=[];function a(t){Highcharts.mapChart(u,{chart:{backgroundColor:t&&t.backgroundColor,animation:!0,height:656,margin:[0,0,0,0],events:{load:function(){this.get(""+c).select(),n(c)}}},mapNavigation:{enabled:t&&t.isNavigation,buttonOptions:{verticalAlign:"top",align:"right"},buttons:{zoomIn:{text:"+",width:30,height:30,x:-10,style:{fontSize:"45px"}},zoomOut:{text:"−",width:30,height:30,x:-10,y:52,style:{fontSize:"45px"}}}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:457},plotOptions:{series:{point:{events:{click:function(){n(this.OKATO)}}}}},mapNavigation:{buttons:{zoomIn:{text:"+",width:22,height:22,x:-10,style:{fontSize:"35px"}},zoomOut:{text:"−",width:22,height:22,x:-10,y:42,style:{fontSize:"35px"}}}},tooltip:{enabled:!1}}},{condition:{minWidth:500},chartOptions:{plotOptions:{series:{point:{events:{mouseOver:function(){n(this.OKATO)},click:function(){var e=this.OKATO;i.RegionsLinks.forEach(function(t){t.OKATO===e&&(window.location.href=t.url)})}}}}}}}]},legend:{enabled:!1},tooltip:{stickOnContact:!0,useHTML:!1,followPointer:!1,headerFormat:null,pointFormat:"{point.NM}",padding:10,backgroundColor:"#ffffff",style:{color:"#000000",fontSize:"14px"},borderWidth:0,shadow:!0},series:[{type:"map",joinBy:"OKATO",allowPointSelect:!0,states:{hover:{color:"#0088CB"},select:{color:"#0088CB"}},color:"#8E96A3",mapData:o,data:e,dataLabels:{enabled:!0,formatter:function(){if(window.innerWidth<1024)return this.point.NM},verticalAlign:"right",style:{fontWeight:400,textAnchor:"middle",textOutline:"0.5px transparent",width:130},textAlign:"center",padding:0,position:"right",inside:!0,x:65}}]})}"interaction"===p.dataset.type?a({backgroundColor:"#F5F5F5",isNavigation:!0}):a({backgroundColor:"#FFFFFF",isNavigation:!1});"interaction"===p.dataset.type&&((()=>{var t=document.createElement("div"),e=(t.classList.add("regions-map__accordion-wrapper"),p.appendChild(t),document.createElement("button"));e.classList.add("accordion-title"),t.appendChild(e),(e=document.createElement("div")).classList.add("accordion-block"),t.appendChild(e)})(),(()=>{var t=document.querySelector(".accordion-title"),e=document.querySelector(".accordion-block");t.addEventListener("click",function(){t.classList.toggle("active"),e.classList.toggle("active"),e.classList.contains("active")?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=""}),window.matchMedia("(min-width: 1023px)").matches&&(t.classList.add("active"),e.classList.add("active"))})());function n(t){var e=p.dataset.type;"interaction"!==e&&"static"!==e||l(t,e)}function l(a,e){Object.keys(i).length?(r=[],i.Data.forEach(function(e){e.OKATO===a&&i.Indicators.forEach(function(t){t.id===e.Pok_id&&(e.title=t.Title,r.push(e))})}),i.RegionsLinks.forEach(function(t){t.OKATO===a&&(t.url=t.url.replace("http://","https://"),r.push(t))}),"interaction"===e?s(a):d()):$.getJSON(""+p.getAttribute("data-url"),function(t){t.Data.forEach(function(e){e.OKATO===a&&t.Indicators.forEach(function(t){t.id===e.Pok_id&&(e.title=t.Title,r.push(e))})}),t.RegionsLinks.forEach(function(t){t.OKATO===a&&(t.url=t.url.replace("http://","https://"),r.push(t))}),"interaction"===e?s(a):d(),i=t})}function s(a){var i=document.querySelector(".accordion-title"),n=document.querySelector(".accordion-block"),e=(n.innerHTML="",o.forEach(function(t,e){t.OKATO===a&&(i.innerText=t.NM),0===e&&(n.innerHTML="")}),r.forEach(function(t){var e,a,i;t.val&&((i=document.createElement("div")).classList.add("accordion-block__item"),a=document.createElement("p"),e=document.createElement("span"),i.appendChild(a),i.appendChild(e),n.appendChild(i),a.innerHTML=t&&t.title,""!==t.Trend&&e.classList.add(""+t&&t.Trend),i=t&&t.val,a=t&&t.dim,i=i.toFixed(t.prec),"ru"===f&&(i=new String(i).replace(/\./g,",")),e.innerHTML="%"===a?i+a:i+" "+a)}),document.createElement("a"));e.classList.add("accordion-block__item-link"),e.innerHTML="Ссылка на регион",r.forEach(function(t){t.url&&(e.href=t.url)}),n.appendChild(e)}function d(){var t=document.querySelector(".regions-map__block-details"),o=(t&&p.removeChild(t),document.createElement("div"));o.classList.add("regions-map__block-details"),p.appendChild(o),r.forEach(function(t){var e,a,i,n;t.val&&((e=document.createElement("div")).classList.add("regions-map__item-details"),(a=document.createElement("p")).classList.add("regions-map__item-details_title"),a.innerHTML=t.title,i=document.createElement("span"),""!==t.Trend?i.classList.add("regions-map__item-details_info",t&&t.Trend):i.classList.add("regions-map__item-details_info"),n=t.val.toFixed(t.prec),"ru"===f&&(n=new String(n).replace(/\./g,",")),"%"===t.dim?i.innerHTML=n+t.dim:i.innerHTML=n+" "+t.dim,e.appendChild(a),e.appendChild(i),o.appendChild(e))})}(t=>{var e;t&&(e=document.querySelector("body"),t.addEventListener("touchmove",function(t){t.preventDefault(),e.classList.add("no-scroll")}),t.addEventListener("touchend",function(){e.classList.remove("no-scroll")}))})(u)})}},app.votingMainPage=function(t){var i,n,o,r,l,s,d,e,a;app.findWithRoot(t,".landing-voting").length&&(i=document.querySelector(".update-time"),app.pollIdentityData().then(function(a){var e=a;e.displayName||o.forEach(function(t){t.classList.remove("voting-hide")}),e.displayName&&(n.forEach(function(t){t.classList.remove("voting-hide"),s.innerText=e.displayName}),e.options.length||r.forEach(function(t){t.classList.remove("voting-hide")}),e.options.length)&&l.forEach(function(t){t.classList.remove("voting-hide")}),setTimeout(function(){var t;document.querySelector(".voting-main__slider-section")&&(t=new Swiper(".votingMainSwiperThumbs",{loop:!1,spaceBetween:10,slidesPerView:4,watchSlidesVisibility:!0,freeMode:!0,watchSlidesProgress:!0}),new Swiper(".votingMainSwiper",{loop:!1,on:{init:function(){$(".image-slider__total").text(d),$(".image-slider__current").text(this.realIndex+1),$(".votingMainSwiperThumbs .swiper-slide").eq(0).addClass("active")},slideChange:function(){$(".image-slider__current").text(this.realIndex+1);var t=this.activeIndex;t=t,$(".votingMainSwiperThumbs .swiper-slide").removeClass("active"),$(".votingMainSwiperThumbs .swiper-slide").eq(t).addClass("active")}},spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t}}).update())},0),app.allVotingCharts.forEach(function(t){var e=t.series[0].data.map(function(t){return{color:a.displayName&&a.options.includes(t.options.id)?"#2AA65E":"#0088CC"}});t.update({series:[{data:e}]})}),app.updateAllChartsData(app.initialChartsData.url,app.allVotingCharts,a,i),setInterval(function(){0<app.allVotingCharts.length&&app.initialChartsData.url&&app.updateAllChartsData(app.initialChartsData.url,app.allVotingCharts,a,i)},app.initialChartsData.interval)}),n=Array.from(document.querySelectorAll('[data-voting-auth="true"]')),o=Array.from(document.querySelectorAll('[data-voting-auth="false"]')),r=Array.from(document.querySelectorAll('[data-voting-poll="false"]')),l=Array.from(document.querySelectorAll('[data-voting-poll="true"]')),s=document.querySelector(".landing-voting__name"),document.querySelector(".voting-main__slider-section")&&(d=Array.from(document.querySelector(".votingMainSwiper").querySelectorAll(".swiper-slide")).length),e=document.querySelector(".logout-modal").children[0],document.querySelectorAll(".js-logout").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),app.openFullscreenModal(e)})}),document.querySelector(".voting-info-modal"))&&(a=document.querySelector(".voting-info-modal").children[0],document.querySelectorAll(".landing-voting__hint").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),app.openFullscreenModal(a),a.querySelector(".login-modal__step-title").scrollIntoView()})}))},app.votingPage=function(t){if(app.findWithRoot(t,".voting-page").length){var e=document.querySelector(".voting-page"),i=Array.from(e.querySelectorAll('[data-voting-auth="false"]')),n=Array.from(document.querySelectorAll('[data-voting-auth="true"]')),o=Array.from(e.querySelectorAll('[data-voting-poll="false"]')),r=Array.from(e.querySelectorAll('[data-voting-poll="true"]')),l=document.querySelector(".update-time"),s=(app.pollIdentityData().then(function(a){var e=a;e.displayName||(i.forEach(function(t){t.classList.remove("voting-hide")}),e.options.length&&o.forEach(function(t){t.classList.add("voting-hide")})),e.displayName&&(n.forEach(function(t){t.classList.remove("voting-hide")}),e.options.length||o.forEach(function(t){t.classList.remove("voting-hide")}),e.options.length&&r.forEach(function(t){e.options.includes(t.dataset.pollOptionId)&&t.classList.remove("voting-hide")}),i.forEach(function(t){t.classList.add("voting-hide")})),app.allVotingCharts.forEach(function(t){var e=t.series[0].data.map(function(t){return{color:a.displayName&&a.options.includes(t.options.id)?"#2AA65E":"#0088CC"}});t.update({series:[{data:e}]})}),app.updateAllChartsData(app.initialChartsData.url,app.allVotingCharts,a,l),setInterval(function(){0<app.allVotingCharts.length&&app.initialChartsData.url&&app.updateAllChartsData(app.initialChartsData.url,app.allVotingCharts,a,l)},1e4)}),new Swiper(".swiper-container",{slidesPerView:"auto",centeredSlides:!0,spaceBetween:"30%",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})),d=e.querySelectorAll(".open-image-modal"),a=e.querySelectorAll(".open-full-modal"),c=e.querySelectorAll(".calendar-card-slide__show-description"),p=e.querySelector(".fullscreen-modal"),u=(Array.from(e.querySelectorAll(".calendar-card")),Array.from(e.querySelectorAll(".calendar-card-slide"))),f=function(t,a){t.addEventListener("click",function(){a(u),app.openFullscreenModal(p),s.update(),e=(t=this).closest("[data-grid-cards]");var t,e=Array.from(e.querySelectorAll(".calendar-card")).indexOf(t.closest(".calendar-card"));-1!==e&&s.slideTo(e)})},h=(d.forEach(function(t){f(t,k)}),a.forEach(function(t){f(t,w)}),c.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),w(u)})}),Array.from(e.querySelectorAll(".js_voting_card_button"))),g=Array.from(e.querySelectorAll(".voting-button-label-active")),m=Array.from(e.querySelectorAll(".voting-button-radio")),v=e.querySelector(".voting-page__submit-popup");if(v){var _=v.querySelector(".voting-page__submit-button"),b=v.querySelector(".voting-page__submit-links-text"),y=v.querySelector(".voting-page__submit-complete-text");m.forEach(function(t){t.addEventListener("change",function(){C(),Array.from(new Set(m.map(t=>t.name))).every(e=>m.some(t=>t.name===e&&t.checked))?(_.disabled=!1,b.classList.add("hide"),y.classList.remove("hide")):(_.disabled=!0,b.classList.remove("hide"),y.classList.add("hide")),v.style.display="flex"})});let a=Array.from(document.querySelectorAll(".tabs.home-tabs .tab")),i=document.querySelector(".voting-page__submit-popup-text .voting-page__submit-links-text");a.forEach(t=>{var e=document.createElement("a");e.textContent=t.textContent.trim(),e.setAttribute("data-tabs-tab",t.getAttribute("data-tabs-tab")),e.classList.add("pseudo"),i.appendChild(e)});d=document.querySelectorAll(".voting-page__submit-links-text .pseudo");app.homeTabs(t),d.forEach(e=>{e.addEventListener("click",()=>{var t=Array.from(a).find(t=>t.getAttribute("data-tabs-tab")===e.getAttribute("data-tabs-tab"));t&&(a.forEach(t=>t.classList.remove("_active")),t.classList.add("_active"),t.scrollIntoView({block:"center",behavior:"smooth"}))})})}C(),h.forEach(function(t){t.addEventListener("click",function(t){var e=t.target.dataset.votingName,a=t.target.dataset.variantId;g.forEach(function(t){t.dataset.votingName===e&&t.dataset.variantId!==a&&t.classList.add("hide")}),h.forEach(function(t){t.dataset.votingName===e&&t.dataset.variantId===a&&t.classList.add("hide")}),g.forEach(function(t){t.dataset.votingName===e&&t.dataset.variantId===a&&t.classList.remove("hide")}),h.forEach(function(t){t.dataset.votingName===e&&t.dataset.variantId!==a&&t.classList.contains("hide")&&t.classList.remove("hide")})})}),m.forEach(function(t){var e,a;t.checked&&(e=t.name,a=t.value,g.forEach(function(t){t.dataset.votingName===e&&t.dataset.variantId!==a&&t.classList.add("hide")}),(t=g.find(function(t){return t.dataset.votingName===e&&t.dataset.variantId===a}))&&t.classList.remove("hide"),t=h.find(function(t){return t.dataset.votingName===e&&t.dataset.variantId===a}))&&t.classList.add("hide")})}function w(t){t.forEach(function(t){t.classList.add("calendar-card-slide-full")}),s.update()}function k(t){t.forEach(function(t){t.classList.remove("calendar-card-slide-full")}),s.update()}function C(){let a=(()=>{var t=document.querySelectorAll(".voting-page__grid-cards");let a=[];return t.forEach(t=>{var e=t.querySelectorAll('input[type="radio"]');Array.from(e).some(t=>t.checked)||a.push(t.closest("[data-tabs-content]").getAttribute("data-tabs-content"))}),a})();document.querySelectorAll(".voting-page__submit-popup-text .pseudo").forEach(t=>{var e=t.getAttribute("data-tabs-tab");a.includes(e)?t.style.display="inline-block":t.style.display="none"})}},app.createChartTooltipPositioner=function(k){return function(a,i,n){function t(t){var e="x"===t;return[t,e?l:s,e?a:i].concat([e?a:i,e?n.plotX+r.plotLeft:n.plotY+r.plotTop,e?r.plotLeft:r.plotTop,e?r.plotLeft+r.plotWidth:r.plotTop+r.plotHeight])}var o,r=this.chart,u=this.distance,f={},h=r.inverted&&n.h||0,e=this.outside,l=e?doc.documentElement.clientWidth-2*u:r.chartWidth,s=e?Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight,doc.body.offsetHeight,doc.documentElement.offsetHeight,doc.documentElement.clientHeight):r.chartHeight,d=r.containerScaling,g=function(t){return d?t*d.scaleX:t},m=function(t){return d?t*d.scaleY:t},c=t("y"),p=t("x"),v=!this.followPointer&&function(){for(var t=arguments,e=t.length,a=0;a<e;a++){var i=t[a];if(null!=i)return i}}(n.ttBelow,!r.inverted==!!n.negative),_=function(t,e,a,i,n,o,r){var l=("y"===t?m:g)(u),s=(a-i)/2,d=i<n-u,c=n+u+i<e,p=n-l-a+s,n=n+l-s;if(v&&c)f[t]=n;else if(!v&&d)f[t]=p;else if(d)f[t]=Math.min(r-i,p-h<0?p:p-h);else{if(!c)return!1;f[t]=Math.max(o,e<n+h+a?n:n+h)}},b=function(t,e,a,i,n){var o;return n<u||e-u<n?o=!1:f[t]=n<a/2?1:e-i/2<n?e-i-2:n-a/2,o},y=function(t){var e=c;c=p,p=e,o=t},w=function(){!1!==_.apply(0,c)?!1!==b.apply(0,p)||o||(y(!0),w()):o?f.x=f.y=0:(y(!0),w())};return(r.inverted||1<this.len)&&y(),w(),f.y=k,f}},app.chartTooltipPositioner=app.createChartTooltipPositioner(10),app.createChartSharedTooltipFormatter=function(a){return function(){return this.points.slice().sort(function(t,e){return t.point.plotY-e.point.plotY}).reduce(function(t,e){return t+'<div class="chart-tooltip-line"><div class="chart-tooltip-dot" style="color:'+e.color+'">●</div>'+(a?"":'<div class="chart-tooltip-series">'+e.series.name+": </div>")+'<div class="chart-tooltip-value">'+e.y+(e.series.options.units||"")+"</div></div>"},'<div class="chart-tooltip-header">'+this.x+"</div>")}},app.chartAutoHeight=function(t,e,a,i){a=a||30,i=i||400;var n,o=$("#"+t),r=!1;function l(){if(!e.options.legend.floating)return r?(e.update({legend:{y:null}}),void o.css("height","")):void 0;var t=e.legend.legendHeight+a;e.update({legend:{y:t}}),o.css("height",t+e.chartHeight+"px"),r=!0}setTimeout(l,i),$(window).on("resize",function(){clearTimeout(n),n=setTimeout(l,i)})},app.charts=function(){"undefined"!=typeof Highcharts&&Highcharts.setOptions({title:{text:""},subtitle:{text:""},chart:{height:400,spacingBottom:0,animation:!1},xAxis:{gridLineWidth:0,labels:{style:{color:"#2b2e33"}}},yAxis:{gridLineWidth:1,lineColor:"#E8E9EB",labels:{style:{color:"#2b2e33"}},title:{x:-17,margin:0,style:{color:"#2b2e33"}}},responsive:{rules:[{condition:{maxWidth:927}}]},tooltip:{useHTML:!0,headerFormat:'<div class="chart-tooltip-header">{point.key}</div>',pointFormat:'<div class="chart-tooltip-line"><div class="chart-tooltip-dot" style="color:{point.color}">●</div><div class="chart-tooltip-series">{series.name}: </div><div class="chart-tooltip-value">{point.y}</div></div>',style:{color:"#ffffff"},padding:0,shadow:!1,backgroundColor:"#36383d",borderRadius:4,borderColor:"#36383d"},legend:{useHTML:!0,labelFormatter:function(){var t={circle:"●",diamond:"◆",square:"◼",triangle:"▲","triangle-down":"▼"}[this.symbol||"circle"];return void 0===t&&-1!==this.symbol.indexOf("url")&&(t=`<img src="${this.symbol.slice(4,-1)}" alt="">`),'<span class="chart-legend-dot" style="color: '+this.color+'">'+t+'</span><span class="chart-legend">'+this.name+"</span>"},itemDistance:16,itemMarginBottom:8,itemMarginTop:0,padding:0,squareSymbol:!1,symbolWidth:0,symbolPadding:0,symbolRadius:0,align:"left",maxHeight:1/0,width:"100%",x:-7},credits:{enabled:!1},plotOptions:{series:{point:{events:{legendItemClick:function(){return!1}}},events:{legendItemClick:function(){return!1}}},column:{borderWidth:0,pointPadding:0,groupPadding:.12},columnrange:{stacking:"normal",pointPadding:0,groupPadding:.1,borderWidth:0}}})},app.charts(),app.chartsPrint=function(a){window.addEventListener("beforeprint",function(){var t=document.querySelector(".highcharts-tooltip-box"),e=document.querySelector('div.highcharts-tooltip[style*="opacity: 1"]');t&&e&&(e.style.opacity=0,t.style.opacity=0),a.chartWidth=800,a.containerWidth=800,a.legend.chart.chartWidth=800,a.renderer.width=800,a.xAxis[0].update(["redraw"]),a.xAxis[0].render(),a.legend.update(["redraw"]),a.legend.render(),a.redraw(),a.render()}),window.addEventListener("afterprint",function(){var t=document.querySelector(".highcharts-tooltip-box"),e=document.querySelector('div.highcharts-tooltip[style*="opacity: 0"]');t&&e&&(e.style.opacity=1,t.style.opacity=1),a.legend.update(["redraw"]),a.xAxis[0].update(["redraw"]),a.xAxis[0].render()})},app.chartsPrintLandscape=function(a){window.addEventListener("beforeprint",function(){var t=document.querySelector(".highcharts-tooltip-box"),e=document.querySelector('div.highcharts-tooltip[style*="opacity: 1"]');t&&e&&(e.style.opacity=0,t.style.opacity=0),a.chartWidth=1700,a.containerWidth=1700,a.legend.chart.chartWidth=1700,a.renderer.width=1700,a.xAxis[0].update(["redraw"]),a.xAxis[0].render(),a.legend.update(["redraw"]),a.legend.render(),a.redraw(),a.render()}),window.addEventListener("afterprint",function(){var t=document.querySelector(".highcharts-tooltip-box"),e=document.querySelector('div.highcharts-tooltip[style*="opacity: 0"]');t&&e&&(e.style.opacity=1,t.style.opacity=1),a.legend.update(["redraw"]),a.xAxis[0].update(["redraw"]),a.xAxis[0].render()})},app.chartLegendDataHighlighter=function(t,e){var i,n=$("#"+t),o="pie"===e.options.chart.type,a=n.find(".chart-legend").length;function r(t){return(o?e.series[0].data:e.series)[t]}for(var l=0;l<a;l++)(e=>{var t=(o?r(l).series:r(l)).options;if(!t.dataLabels||!t.dataLabels.enabled){var a=(o?".highcharts-color-":".highcharts-series-")+e+" .chart-legend";try{n.get(0).addEventListener("mouseover",function(t){t=$(t.target);i!==e&&t.is($(a))&&(null!=i&&r(i).update({dataLabels:{enabled:!1}},!1),r(e).update({dataLabels:{enabled:!0}}),i=e)},!1)}catch(t){console.error(t)}}})(l);function s(){null!=i&&(r(i).update({dataLabels:{enabled:!1}}),i=null)}n.add(n.find(".highcharts-legend")).on("mouseleave",s),n.find(".highcharts-root").on("mouseleave",s)},app.menuSticky=function(t){var a=app.findWithRoot(t,".menu-sticky"),t=app.findWithRoot(t,".menu-sticky__close"),i=[],n=document.querySelectorAll(".menu-sticky__link");n.forEach(function(t){var t=t.getAttribute("href");t&&"#"==t[0]&&(t=document.querySelector(t))&&i.push(t)}),a&&(window.addEventListener("scroll",function(){var e,t=i.filter(function(t){return 0<=(t=(t=t).getBoundingClientRect()).top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)});t.length&&(e=t[t.length-1],n.forEach(function(t){t.classList.remove("active"),t.parentElement.classList.remove("active"),t.getAttribute("href")==="#"+e.id&&(t.classList.add("active"),t.parentElement.classList.add("active"))})),450<scrollY?a.addClass("show"):a.remove("show")}),a.on("click",function(){a.addClass("active")}),a.on("mouseleave",function(){a.removeClass("active")}),t.on("click",function(t){t.stopPropagation(),a.removeClass("active")}))},app.JQueryInputHooks=function(){function l(t,e,a){if($.expr.match.bool.test(a))return!1===e?jQuery.removeAttr(t,a):t.setAttribute(a,a),a}function t(t,e){$(t).trigger("input-hook",[{type:"set-value",value:e}])}function e(t,e,a){"INPUT"!==t.tagName&&"SELECT"!==t.tagName||$(t).trigger("input-hook",[{type:"set-attr",value:e,attr:a}])}function a(t,e,a,i){var n=i?"set":"get",o=$[t][e]||{},r=($[t][e]=o)[n];!r&&"attrHooks"===t&&i&&(r=l),$[t][e][n]=function(){var t=arguments;return setTimeout(function(){a.apply(this,t)}),r?r.apply(this,arguments):void 0}}a("valHooks","input",t,!0),a("valHooks","select",t,!0),a("valHooks","textarea",t,!0),a("attrHooks","disabled",e,!0),a("propHooks","disabled",e,!0),a("attrHooks","readonly",e,!0),a("propHooks","readonly",e,!0),a("attrHooks","checked",e,!0),a("propHooks","checked",e,!0)},app.JQueryInputHooks(),$(function(){app.dom={$window:$(window),$document:$(document),$body:$("body"),$header:$("#header")},app.l10n=window.appLocalization,app.utils.getDirection.init(),app.init(document,!1),app.dom.$document.on("new-html",function(t){app.init(t.target,!0)}),setTimeout(function(){app.dom.$document.trigger("app-ready")}),-1!==navigator.appVersion.indexOf("MSIE 10")&&setTimeout(function(){app.dom.$body.addClass("ie10")})}),app.init=function(t,e){try{app.copyBtn(t)}catch(t){console.error(t)}try{app.materialsGall(t)}catch(t){console.error(t)}try{app.bannersGall(t)}catch(t){console.error(t)}try{app.gotoUp(t)}catch(t){console.error(t)}try{app.homeHeaderGall(t)}catch(t){console.error(t)}try{app.dropdown(t)}catch(t){console.error(t)}try{app.tabsWidthCheckingUnit(t)}catch(t){console.error(t)}try{app.topLine(t)}catch(t){console.error(t)}try{app.homeContentAnimation(t)}catch(t){console.error(t)}try{app.tabs(t)}catch(t){console.error(t)}try{app.homeTabs(t)}catch(t){console.error(t)}try{app.toggle(t)}catch(t){console.error(t)}try{app.homeBannersGall(t)}catch(t){console.error(t)}try{app.versions(t)}catch(t){console.error(t)}try{app.homeMenuButton(t)}catch(t){console.error(t)}try{app.helpful(t)}catch(t){console.error(t)}try{app.searchHelpful(t)}catch(t){console.error(t)}try{app.requestHelpful(t)}catch(t){console.error(t)}try{e||app.openAnchor(t)}catch(t){console.error(t)}try{app.tables(t)}catch(t){console.error(t)}try{app.imageSlider(t)}catch(t){console.error(t)}try{app.menuSticky(t)}catch(t){console.error(t)}try{app.shareBtn(t)}catch(t){console.error(t)}try{app.ajaxNews(t)}catch(t){console.error(t)}try{app.ajaxPreviews(t)}catch(t){console.error(t)}try{app.ajaxAbout(t)}catch(t){console.error(t)}try{app.ajaxCross(t)}catch(t){console.error(t)}try{app.rouble(t)}catch(t){console.error(t)}try{app.calendar(t)}catch(t){console.error(t)}try{app.orgStructure(t)}catch(t){console.error(t)}try{app.filters(t)}catch(t){console.error(t)}try{app.size(t)}catch(t){console.error(t)}try{app.tableScroll(t)}catch(t){console.error(t)}try{app.datepicker(t)}catch(t){console.error(t)}try{app.datepickerPeriod(t)}catch(t){console.error(t)}try{app.monthpicker(t)}catch(t){console.error(t)}try{app.monthpickerPeriod(t)}catch(t){console.error(t)}try{app.yearpickerPeriod(t)}catch(t){console.error(t)}try{app.menu(t)}catch(t){console.error(t)}try{app.homeHeaderGallMobile(t)}catch(t){console.error(t)}try{app.event(t)}catch(t){console.error(t)}try{app.sorting(t)}catch(t){console.error(t)}try{app.tabsWithFilters(t)}catch(t){console.error(t)}try{app.searchForm(t)}catch(t){console.error(t)}try{app.textareaCounter(t)}catch(t){console.error(t)}try{app.textInput(t)}catch(t){console.error(t)}try{app.fileInput(t)}catch(t){console.error(t)}try{app.select(t)}catch(t){console.error(t)}try{app.radioCheckbox(t)}catch(t){console.error(t)}try{app.addField(t)}catch(t){console.error(t)}try{app.toggleSelectPopup(t)}catch(t){console.error(t)}try{app.scrollToContentBtn(t)}catch(t){console.error(t)}try{app.videoStub(t)}catch(t){console.error(t)}try{app.accessibility(t)}catch(t){console.error(t)}try{app.export(t)}catch(t){console.error(t)}try{app.popupCookies(t)}catch(t){console.error(t)}try{app.popup(t)}catch(t){console.error(t)}try{app.trAsLink(t)}catch(t){console.error(t)}try{app.inputHiddenField(t)}catch(t){console.error(t)}try{app.newsMainText(t)}catch(t){console.error(t)}try{app.checkboxAllSelect(t)}catch(t){console.error(t)}try{app.banknotesPoints(t)}catch(t){console.error(t)}try{app.brandbook(t)}catch(t){console.error(t)}try{app.lineCutter(t)}catch(t){console.error(t)}try{app.mobileTooltip(t)}catch(t){console.error(t)}try{app.homeStickyMenu(t)}catch(t){console.error(t)}try{app.popupOldVersionSite(t)}catch(t){console.error(t)}try{app.homeHeaderIEFix(t)}catch(t){console.error(t)}try{app.homeMainAsideSticky(t)}catch(t){console.error(t)}try{app.excursionCalendar(t)}catch(t){console.error(t)}try{app.faqIndicators(t)}catch(t){console.error(t)}try{app.subscribe(t)}catch(t){console.error(t)}try{app.statistics(t)}catch(t){console.error(t)}try{app.AddItemInMenu(t)}catch(t){console.error(t)}try{app.accordionTable(t)}catch(t){console.error(t)}try{app.dropDownRow(t)}catch(t){console.error(t)}try{app.hidingContentTable(t)}catch(t){console.error(t)}try{app.clickOnHref(t)}catch(t){console.error(t)}try{app.tips(t)}catch(t){console.error(t)}try{app.votingMainPage(t)}catch(t){console.error(t)}try{app.votingPage(t)}catch(t){console.error(t)}try{app.initFullscreenModal(t)}catch(t){console.error(t)}app.findWithRoot(t,":input").inputmask()},app.copyBtn=function(t){t=app.findWithRoot(t,".copy-btn");tippy("[data-copy-url]",{placement:"bottom-start",trigger:"click",content:function(t){return t.getAttribute("data-tooltip-content")||t.getAttribute("data-footnote")||t.title},onShow:function(t){setTimeout(function(){t.hide()},2e3)}}),t.on("mouseleave",function(t){$(t.currentTarget).hasClass("active")&&t.stopImmediatePropagation()}),t.on("mouseout",function(t){$(t.currentTarget).hasClass("active")&&t.stopImmediatePropagation()}),t.on("click",function(t){t.preventDefault();var e,a=$(this);a.trigger("mouseleave").trigger("mouseenter"),a.addClass("active"),setTimeout(function(){a.removeClass("active")},2e3),t=a.data("copy-url"),e=$("<input>"),$("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove()})},app.statistics=function(t){t=app.findWithRoot(t,"[data-statistics-filter]");t.length&&t.each(function(){var t=$(this),e=t.find("[data-statistics-filter-inner]"),a=t.find("[data-statistics-filter-search]"),n=t.find("[data-statistics-filter-search-empty]"),o=t.find("[data-statistics-filter-theme]").parent(),r=o.children("[data-statistics-filter-theme-text]"),l=t.find("[data-statistics-filter-theme-group]").parent(),s=l.children("[data-statistics-filter-theme-text]"),i=t.find("[data-filter-close]"),t=t.find("input[type=radio]"),d=l.add(o);function c(){var i=$(this).val().toLowerCase();d.removeClass("_hidden _found"),i?("auto"===e.css("min-height")&&e.css("min-height",e.height()+"px"),r.each(function(){var t=$(this),e=-1!==t.text().toLowerCase().indexOf(i);t.parent().addClass(e?"_found":"_hidden")}),s.each(function(){var t=$(this),e=t.parent(),t=-1!==t.text().toLowerCase().indexOf(i);function a(){var t=e.children("[data-toggle-btn]");t.hasClass("_active")||t.click()}e.parents(l).add(e.find(o)).hasClass("_found")?a():t?(e.addClass("_found").find(d).removeClass("_hidden"),a()):e.addClass("_hidden")}),n.toggle(!d.hasClass("_found"))):(e.css("min-height",""),n.hide())}i.on("click",function(){a.val()&&a.val("")}),t.on("change",function(){a.val()&&a.val("")}),a.on("input",c),a.on("input-hook",c)})},app.subscribe=function(t){t=app.findWithRoot(t,"[data-subscribe]");t.length&&t.each(function(){var t=$(this),a=t.find("input[type=checkbox]"),i=t.find("[data-subscribe-selected]"),e=t.find("[data-subscribe-popup-open]"),n=$('[data-subscribe-popup="'+t.data("subscribe")+'"]'),o=n.find("[data-subscribe-popup-inner]"),t=n.find("[data-subscribe-popup-close]"),r=n.find("[data-subscribe-popup-clear]"),l=n.find("[data-subscribe-popup-search]"),s=n.find("[data-subscribe-popup-search-empty]"),d=n.find("[data-subscribe-popup-theme]"),c=d.parent(),p=c.children("[data-subscribe-popup-theme-text]"),u=n.find("[data-subscribe-popup-theme-group]"),f=u.parent(),h=f.children("[data-subscribe-popup-theme-text]"),g=(a.on("change",function(){d.prop("checked",a.is(":checked"))}),a.is(":checked")&&0===d.filter(":checked").length&&d.prop("checked",!0),e.on("click",function(){n.addClass("_open"),n.focus()}),t.on("click",function(){n.removeClass("_open"),l.val("")}),r.on("click",function(){d.prop("checked",!1)}),f.add(c));function m(){var a=$(this).val().toLowerCase();g.removeClass("_hidden _found"),a?("auto"===o.css("min-height")&&o.css("min-height",o.height()+"px"),p.each(function(){var t=$(this),e=-1!==t.text().toLowerCase().indexOf(a);t.parent().addClass(e?"_found":"_hidden")}),h.each(function(){var t=$(this),e=t.parent(),t=-1!==t.text().toLowerCase().indexOf(a);e.parents(f).add(e.find(c)).hasClass("_found")||(t?e.addClass("_found").find(g).removeClass("_hidden"):e.addClass("_hidden"))}),s.toggle(!g.hasClass("_found"))):(o.css("min-height",""),s.hide())}l.on("input",m),l.on("input-hook",m),u.each(function(){var a=$(this),i=a.parent(),e=(a.is(":checked")&&i.find(d).filter(":not(:checked)").prop("checked",!0),a.on("change",function(t){i.find(d).prop("checked",a.is(":checked"))}),app.createRunOnceTimeout());function t(t){t&&a.is(t.target)||e(function(){var t=i.find(d),e=t.filter(":checked");i.removeClass("_indeterminate"),t.length===e.length?a.prop("checked",!0):0!==e.length?(a.prop("checked",!1),i.addClass("_indeterminate")):a.prop("checked",!1)})}t(),i.on("change",t),i.on("input-hook",t)});var v=app.createRunOnceTimeout();function _(){v(function(){var t=d.add(u),e=t.filter(":checked");e.length===t.length?(a.prop("checked",!0),i.removeClass("_active").text("")):0<e.length?(a.prop("checked",!0),t=(app.declOfNum(e.length,app.l10n.subscription.text)||"").replace("$count$",e.length),i.addClass("_active").text(t)):a.prop("checked",!1)})}_(),n.on("change",function(t){"checkbox"===t.target.type&&_()}),n.on("input-hook",_)})},app.faqIndicators=function(t){var e,a,i,o="data-faq-indicator",n="data-faq-indicator-filter",r=app.findWithRoot(t,"["+o+"]"),t=app.findWithRoot(t,"["+n+"]");function l(){switch($(this).attr(n)){case"new":r.hide(),e.show();break;case"update":r.hide(),a.show();break;default:r.show()}}(r.length||t.length)&&(i=r.filter("["+o+"=new-update]"),e=r.filter("["+o+"=new]").add(i),a=r.filter("["+o+"=update]").add(i),r.filter(".dropdown_link").each(function(){var t=$(this),e=t.closest("["+o+"]").attr(o),e=$('<span class="faq-indicator-'+e+'" />'),a=this.childNodes[this.childNodes.length-1];a&&3===a.nodeType&&a.data&&0<a.data.trim().length&&t.append(e)}),r.filter(".dropdown.question").children(".dropdown_title").children(".question_title").each(function(){var t=$(this),e=t.closest("["+o+"]").attr(o),e=$('<span class="faq-indicator-'+e+'" />'),a=this.childNodes[this.childNodes.length-1],a=(a&&3===a.nodeType&&a.data&&0<a.data.trim().length&&t.append(e),t.children("p:last-child")),i=t.children("h2:last-child, h3:last-child, h4:last-child"),n=t.children("ul:last-child, ol:last-child");(a.length?a:n.length?n.find("li:last-child h3"):i.length?0<i.children("p").length?i.find("p:last-child"):i:t).append(e)}),(i=t.filter(function(){return 0<$(this).find("input:checked").length}))[0]&&l.call(i[0]),t.on("change",l))},app.excursionCalendar=function(t){var a,i,n,e,o="data-excursion-calendar-type",r=app.findWithRoot(t,"["+o+"]"),l=app.findWithRoot(t,"[data-excursion-calendar-head]"),s=app.findWithRoot(t,"[data-excursion-calendar]"),d=app.findWithRoot(t,"[data-excursion-calendar-text]"),c=app.findWithRoot(t,".news-events-empty"),p=c.find("[data-excursion-empty-description]"),t=c.find("[data-excursion-empty-reset-button]");function u(){d.each(function(){var t=$(this),e=t.data("text");if(e||(e=t.text(),t.data("text",e)),t.text()!==e&&t.text(e),!(Math.round(t.height())+1>=this.scrollHeight))for(var a=e.split(" ");a.pop();)if(t.text(a.join(" ")+"…"),Math.round(t.height())+1>=this.scrollHeight)return})}r.length&&(a=s.find(".excursion-calendar_col"),i=a.children(),(n=l.children()).filter("._active").length||(l=n.filter(":not(._disabled)").eq(0).index(),n.add(a).removeClass("_active"),n.eq(l).add(a.eq(l)).addClass("_active")),n.each(function(t){var e=$(this);e.hasClass("_disabled")||e.on("click",function(){n.add(a).removeClass("_active"),e.add(a.eq(t)).addClass("_active"),e.closest(".excursion-calendar_table_empty").find("#text").toggle()})}),r.on("click",function(t){var t=$(t.target),e=t.attr(o),t=(r.removeClass("_active"),t.addClass("_active"),s.removeClass("_group _personal"),e&&s.addClass("_"+e),i.filter("._"+e));e&&!t.length?(c.addClass("_active _with-filter"),p.text("По вашему запросу ничего не найдено.")):(e||i.length?c.removeClass("_active _with-filter"):(c.addClass("_active"),c.removeClass("_with-filter")),p.text("К сожалению, на этой неделе экскурсий пока не запланировано."))}),t.on("click",function(t){r.first().trigger("click")}),u(),e=Date.now(),app.dom.$window.on("resize",function(){Date.now()-e<=200||(setTimeout(u,200),e=Date.now())}))},app.homeHeaderIEFix=function(t){var e,a=app.findWithRoot(t,".home-header_bottom"),t=!!window.MSInputMethodContext&&!!document.documentMode;function i(){setTimeout(function(){e.css("height",a.height()+"px")})}a.length&&t&&(e=$('<div class="home-header_bottom-compensation" />').appendTo(a.parent()),a.addClass("_ie-fix"),i(),app.dom.$window.on("resize",i))},app.homeMainAsideSticky=function(t){var u,f,h,g,m,v=app.findWithRoot(t,"[data-home-main-aside-sticky]");function _(){f.css("min-height",v.outerHeight()+"px")}function e(t){var e,a,i,n,o,r,l,s,d,c,p=u.scrollTop();p===h&&t&&"scroll"===t.type||Math.round(v.outerHeight())>=Math.round(f.height())||(e=p+(t=f.get(0).getBoundingClientRect()).top,t=p+t.bottom,a=v.height(),i=p+(n=v.get(0).getBoundingClientRect()).top,n=p+n.bottom,r=(o=p)+u.height(),s=(l=p-h)<0,d=0<l,i<e&&s?c="_start":o<i&&"_start"!==g&&s?c="_fixedTop":t<n?(c="_end",v.css("top","auto"),setTimeout(function(){var t=u.scrollTop(),e=t+f.get(0).getBoundingClientRect().top,t=t+v.get(0).getBoundingClientRect().top;v.css("top",t-e)},800)):n<r&&a<o&&"_end"!==g&&d?c="_fixedBottom":s&&"_fixedBottom"===g||d&&"_fixedTop"===g?v.css("top",i-e-l):c=g,f.css("min-height")!==v.outerHeight()+"px"&&_(),1<document.body.offsetHeight-m&&"_end"==g&&(v.removeClass("_fixedTop _fixedBottom _start _end"),v.addClass("_fixedTop"),c="_fixedTop",m=document.body.offsetHeight),c&&c!==g&&(g=c,v.removeClass("_fixedTop _fixedBottom _start _end"),c)&&v.addClass(c),h=p)}v.length&&(u=app.dom.$window,f=v.parent(),g="_start",m=document.body.offsetHeight,_(),setTimeout(function(){window.addEventListener("scroll",e)},500),app.dom.$window.on("resize",function(){_(),e()}),app.dom.$window.on("new-html",function(){setTimeout(e)}))},app.popupOldVersionSite=function(t){var e,a=app.findWithRoot(t,"[data-old-site-version]"),t=a.find("[data-old-site-version-close]");a.length&&(e="old-version-site",document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"))||(a.show(),t.on("click",function(){document.cookie=e+"=1; path=/; max-age=31536000",a.hide()})))},app.homeStickyMenu=function(t){var e=app.findWithRoot(t,"[data-home-sticky]"),a=e.parent(),i=app.findWithRoot(t,".top-line"),n=$(".tab_selected"),o=app.findWithRoot(t,".tabs_items");e.length&&((t=function(){if(!a.length)return!1;n.hasClass("_active")&&(n.removeClass("_active"),o.hide());var t=a[0].getBoundingClientRect();t.top>i.height()||t.bottom<e.outerHeight()?e.hasClass("_fixed")&&e.removeClass("_fixed").width(""):t.top<=0&&!e.hasClass("_fixed")&&e.addClass("_fixed").width(t.width)})(),a.find("a").on("click",function(t){var e=a.offset();$("html, body").stop().animate({scrollTop:e.top-i.height()},300,"swing")}),app.dom.$window.on("scroll",t),app.dom.$window.on("resize",function(){e.hasClass("_fixed")&&e.width(a.width())}))},app.mobileTooltip=(()=>{var e=$('<div class="mobile-tooltip" />').hide(),a=$("<div />").appendTo(e);return $('<div class="mobile-tooltip_close" />').on("click",function(){e.hide(),a.html("")}).appendTo(e),function(t){e.appendTo(app.dom.$body),app.findWithRoot(t,"[data-mobile-tooltip-content]").on("click",function(){a.html($(this).data("mobile-tooltip-content")),e.show()})}})(),app.lineCutter=function(t){app.findWithRoot(t,"[data-line-cutter]").each(function(){var t=$(this),e=+t.data("line-cutter");function a(){setTimeout(function(){t.line(e,"...")})}e&&(setTimeout(a),setTimeout(a,500),app.dom.$window.on("resize",a))})},app.brandbook=function(t){var e,a=app.findWithRoot(t,"[data-brandbook]");function i(){var t=e.filter("._active").map(function(){return"brandbook-"+$(this).data("brandbook-variant")}).get().join(" ");a.attr("class","brandbook").addClass(t)}a.length&&((e=app.findWithRoot(t,"[data-brandbook-variant]")).on("click",function(){var t=$(this);t.siblings().removeClass("_active"),t.addClass("_active"),i()}),i())},app.banknotesPoints=function(t){app.findWithRoot(t,"[data-point-container]").each(function(){var a=$(this).find("[data-point]"),d=a.length,i=null,o=null;function c(t){a.eq(t).removeClass("_active"),app.dom.$document.off("click",o),i=null}function p(e){var n;i!==e&&(null!==i&&c(i),n=a.eq(e),i=e,n.addClass("_active"),o=function(t){$(t.target).closest(n).length||c(e)},app.dom.$document.on("click",o),setTimeout(function(){var t=n.find("[data-point-info]"),e=app.dom.$window.scrollTop(),a=app.dom.$window.height(),i=t.offset().top-e,t=i+t.outerHeight();i<0?$("html, body").stop().animate({scrollTop:e+i-a/2},300,"swing"):a<t&&$("html, body").stop().animate({scrollTop:e+t-a/2},300,"swing")}))}a.each(function(t){var a=$(this),e=a.find("[data-point-open]"),i=a.find("[data-point-close]"),n=a.find("[data-point-info]"),o=a.find("[data-point-counter]"),r=a.find("[data-point-prev]"),l=a.find("[data-point-next]");function s(){var t=a.offset().left+a.outerWidth()/2,e=app.dom.$window.width();n.removeClass("_left _right _top"),888<t?n.addClass("_left"):800<e-t?n.addClass("_right"):n.addClass("_top")}s(),a.closest("[data-tabs-content]").on("show-hidden",s),app.dom.$window.on("resize",s),o.text(t+1+" / "+d),r.on("click",function(){return p(0===t?d-1:t-1),!1}),l.on("click",function(){return p(t===d-1?0:t+1),!1}),e.on("click",function(){p(t)}),i.on("click",function(){c(t)})})})},app.checkboxAllSelect=function(t){var d="data-select-all";app.findWithRoot(t,"["+d+"]:not(:checkbox)").each(function(){var t=$(this),e=t.attr(d),a=(e?t.parent():t).parent(),i=t.children(":eq(0)"),n=t.children(":eq(1)"),o=!0,r=(e?"["+d+'="'+e+'"]':"")+":checkbox:enabled";function l(){return a.find(r)}function s(){var t=l();o=t.length!==t.filter(":checked").length,0<t.filter(":checked").length?$(n).attr("disabled",!1):$(n).attr("disabled",!0),n.hasClass("btn")||i.hasClass("btn")?n.hasClass("btn")&&i.hasClass("btn")&&(i.show(),n.show()):(i.toggle(o),n.toggle(!o))}t.on("click",function(t){$(t.target).hasClass("btn")&&$(t.target).is(i)?l().prop("checked",!0):$(t.target).hasClass("btn")&&$(t.target).is(n)?(l().prop("checked",!1),$(n).attr("disabled",!0)):l().prop("checked",o)}),a.on("change input-hook",function(t,e){!$(t.target).is(":checkbox")||e&&"set-attr"!==e.type||s()}),s()})},app.newsMainText=function(t){var n,e,o=app.findWithRoot(t,"[data-news-main-container]"),r=o.find("[data-news-main-text]");function a(){r.css({display:"none",height:"",margin:""});var t=o.height(),e=n.split(/<br *\/?>/).map(function(t){return t?t.split(" "):[]});if(r.html(".").css({display:"block",visibality:"hidden"}),o.height()>t)r.html(n),r.css({display:"block",height:"0",margin:"0"});else{r.html(n);t:for(var a=e.length-1;0<=a;a--){for(var i=!1;e[a].length;){if(o.height()<=t)break t;r.html(e.map(function(t){return t.join(" ")}).join("<br>")+(i?"...":"")),i=!0,e[a].pop()}e.pop()}r.css({visibality:""})}}function i(){return("undefined"!=typeof performance&&performance.now?performance:Date).now()}o.length&&r.length&&(n=r.html(),a(),e=i(),app.dom.$window.on("resize",function(){i()-e<=200||(setTimeout(a,200),e=i())}))},app.inputHiddenField=function(t){app.findWithRoot(t,"[data-input-hidden-id]").each(function(){var e=$(this),t=e.data("input-hidden-id"),a=$("#"+t),i=e.is("option");function n(t){a.toggle(i?e.closest("select").val()===e.attr("value"):e.is(":checked"))}t=i?e.closest("select"):e.closest("form").find('input[type="'+e.attr("type")+'"][name="'+e.attr("name")+'"]');t.on("change",n),t.on("input-hook",n),n()})},app.popupCookies=function(t){var e=app.findWithRoot(t,"[data-popup-cookies]"),t=e.find("[data-popup-cookies-btn]");!e.length||document.cookie.match(new RegExp("(?:^|; )accept=([^;]*)"))||(e.addClass("_open"),t.on("click",function(){document.cookie="accept=1; path=/; max-age=31536000",e.removeClass("_open")}))},app.popup=function(t){var e=app.findWithRoot(t,"[data-popup-open]"),t=app.findWithRoot(t,"[data-popup-close]");e.on("click",function(t){var e=$(this).attr("data-popup-open"),e=$('[data-popup="'+e+'"]'),a=(e.data("body-overflow",document.body.style.overflow),document.body.style.overflow="hidden",e.addClass("_open"),e.find("input"));(a.length?a.first():e.attr("tabindex","-1")).focus(),t.preventDefault()}),t.on("click",function(t){var e=$(this).closest("[data-popup]");document.body.style.overflow=e.data("body-overflow")||"",e.removeClass("_open"),t.preventDefault()})},app.accessibility=function(t){app.findWithRoot(t,".footer_menu_item._visually-impaired a").on("click",function(){return $("html").toggleClass("vision-impaired"),app.dom.$window.trigger("resize"),window.localStorage&&localStorage.setItem("vision-impaired",!!$("html").hasClass("vision-impaired")||""),!1})},app.trAsLink=function(t){app.findWithRoot(t,"tr[data-tr-link]").on("click",function(t){var e=$(this).attr("data-tr-link");e&&(window.location=e)})},app.videoStub=function(t){$('meta[name="cbr:intranet"][content="true"]').length&&((t=app.findWithRoot(t,".media > .video-scale")).children().remove(),$('<div class="video-stub"><div class="video-stub__img-no-video"></div><span>Данное видео доступно <br>только в сети интернет</span></div>').appendTo(t))},app.scrollToContentBtn=function(t){app.findWithRoot(t,"[data-scroll-to-content]").on("click",function(){$("html, body").stop().animate({scrollTop:app.dom.$window.height()},300,"swing")})},app.fileInput=function(t){var m=0;Array.prototype.forEach.call(t.querySelectorAll("[data-file-input], [data-file-input-simple]"),function(i){var o=i.querySelector(".file-input_files"),n=i.querySelector('input[type="file"]'),r=i.querySelector(".file-input_input"),t=i.querySelector(".file-input_delete-all"),l=i.hasAttribute("data-file-input-simple"),h=n.dataset.fileextensions,g=+n.dataset.maxfilenamesize,s=+n.dataset.maxfilescount,d=+n.dataset.maxfilesize;function e(){var t,e=0,a=0;Array.prototype.forEach.call(i.querySelectorAll(".file-input_file"),function(t){t=t.dataset.file;e+=JSON.parse(t).size,a++}),i.classList.toggle("_delete-all",l?1<=a:2<=a),l||(t="",d<e?t=app.l10n.file.maxSizeErr:s<a&&(t=app.l10n.file.maxCountErr),i.classList.toggle("_error",!!t),i.querySelector(".file-input_error-name").innerHTML=t)}function c(t){l&&(o.innerHTML=""),Array.prototype.forEach.call(t||[],function(t){var e=(t.name.match(/\.[^.]+?$/)||[""])[0],a=t.name.slice(0,-e.length),s=e.slice(1).toUpperCase(),i=(i=t.size)?10485760<=i?Math.round(i/1048576)+" "+app.l10n.file.mb:1048576<=i?(i/1048576).toFixed(1).replace(".",",")+" "+app.l10n.file.mb:10240<=i?Math.round(i/1024)+" "+app.l10n.file.kb:1024<=i?(i/1024).toFixed(1).replace(".",",")+" "+app.l10n.file.kb:i+" "+app.l10n.file.b:"",n=!1;if(!l)try{h.indexOf(s)<0?n=app.l10n.file.formatErr:t.name.length>g&&(n=app.l10n.file.nameSizeErr.replace("$value$",g))}catch(t){}var d=document.createElement("div");d.className="file-input_file"+(n?" _error":""),d.innerHTML=`
					<div class="file-input_file-info">
						<div class="file-input_name"><span>${a}</span><span>${e}</span></div>
						${n?`<div class="file-input_additional">${n}</div>`:`<div class="file-input_info">
							<div class="file-input_type">Тип документа</div>
						</div>`}
						<div class="file-input_size">${i}
								${l?"":'<button class="file-input_delete" type="button" aria-label="Удалить"></button>'}
							</div>
					</div>
					<div class="file-input_type-select d-none">
						<div class="file-input_hint">Выберите один из предложенных вариантов ниже. Указание типа файлов необходимо для оперативного рассмотрения Вашего обращения</div>
						${(a=>{let i=[{id:"radio-group_1",value:"Текст обращения",label:"Текст обращения"},{id:"radio-group_2",value:"Паспорт",label:"Паспорт"},{id:"radio-group_4",value:"СНИЛС",label:"СНИЛС"},{id:"radio-group_3",value:"Водительское удостоверение",label:"Водительское удостоверение"},{id:"radio-group_6",value:"Договор",label:"Договор"},{id:"radio-group_5",value:"Полис",label:"Полис"},{id:"radio-group_7",value:"Акт",label:"Акт"},{id:"radio-group_8",value:"Ответ финансовой организации",label:"Ответ финансовой организации"},{id:"radio-group_9",value:"Другое",label:"Другое"}];return i.map((t,e)=>`
						<div class="radio radio-select${i.length-1===e?" radio-select_border-top":""}">
							<input type="radio" name="radio-group-${a}-${m}" id="${t.id}_${a}-${m}" value="${t.value}">
							<label for="${t.id}_${a}-${m}">${t.label}</label>
						</div>
					`).join("")})(a)}
						<div class="request_block other-input d-none">
							<div class="text-input" data-text-input="data-text-input">
								<span class="field-validation-valid" data-valmsg-for="data-valmsg-for">до 30 символов</span>
								<label class="input_label">
									<input type="text" maxlength="30">
									<div class="input_placeholder input_placeholder_bg-gray98">Тайтл</div>
								</label>
								<div class="input_hint _optional">до 30 символов</div>
							</div>
						</div>
						<div class="file-input_type-buttons">
							<button class="btn _large _outline">Отменить</button>
							<button class="btn _large _blue">Применить</button>
						</div>
					</div>
				`,d.dataset.file=JSON.stringify(t),o.appendChild(d);let c=null,p="";if(!n){let e=d.querySelector(".file-input_type"),a=d.querySelector(".file-input_type-select"),i=d.querySelector(".other-input"),n=i.querySelector("input"),o=d.querySelector(".file-input_type-buttons");s=d.querySelector(".btn._outline");let r=d.querySelector(".btn._blue");function u(){a.classList.contains("d-block")?(d.classList.remove("file-input_type-active"),d.classList.remove("file-input_file-active"),a.classList.remove("d-block"),a.classList.add("d-none")):(d.classList.add("file-input_file-active"),d.classList.add("file-input_type-active"),r.disabled=!1,l.classList.add("field-validation-valid"),l.classList.remove("field-validation-error"),a.classList.remove("d-none"),a.classList.add("d-block"))}e.addEventListener("click",function(){var t;d.querySelector(".text-input_clear")||app.textInput(d),d.querySelector(".text-input_clear").addEventListener("click",()=>{r.disabled=!0}),c&&((t=a.querySelector(`input[value="${c}"]`))&&(t.checked=!0),"Другое"===c?(i.classList.remove("d-none"),d.querySelector(".text-input").classList.add("_focus","_value")):i.classList.add("d-none"),n.value=p),u()});var f=null;Array.prototype.forEach.call(a.querySelectorAll('input[type="radio"]'),function(t){t.addEventListener("change",function(t){o.style.display="flex",r.disabled=!1,"Другое"===t.target.value?i.classList.remove("d-none"):i.classList.add("d-none"),f=t.target.value})}),s.addEventListener("click",function(t){t.preventDefault(),c?("Другое"===(f=c)?(i.classList.remove("d-none"),n.value=p):i.classList.add("d-none"),a.querySelector(`input[value="${f}"]`).checked=!0):(o.style.display="none",f=null,Array.prototype.forEach.call(a.querySelectorAll('input[type="radio"]'),function(t){t.checked=!1}),i.classList.add("d-none"),n.value=""),u()});let l=i.querySelector("[data-valmsg-for]");r.addEventListener("click",function(t){t.preventDefault();t=n.value.trim();"Другое"!==f||t?(l.classList.add("field-validation-valid"),l.classList.remove("field-validation-error"),r.disabled=!1,"Другое"===(c=f)?(p=t,e.textContent=t):e.textContent=f,e.classList.add("file-input_type-selected"),u()):(l.classList.remove("field-validation-valid"),l.classList.add("field-validation-error"),r.disabled=!0)}),n.addEventListener("input",function(){0<n.value.trim().length?(l.classList.add("field-validation-valid"),l.classList.remove("field-validation-error"),r.disabled=!1):(l.classList.remove("field-validation-valid"),l.classList.add("field-validation-error"),r.disabled=!0)})}++m}),e()}r.addEventListener("dragover",function(t){t.preventDefault(),r.classList.add("_dragging")}),r.addEventListener("dragleave",function(){r.classList.remove("_dragging")}),r.addEventListener("drop",function(t){t.preventDefault(),r.classList.remove("_dragging");var e,a=t.dataTransfer.files;if(l)try{n.multiple||1===a.length?n.files=a:((e=new DataTransfer).items.add(a[0]),n.files=e.files),c(n.files)}catch(t){}else c(a)}),n.addEventListener("change",function(){c(n.files),l||(n.value=null)}),i.addEventListener("click",function(t){t.target.classList.contains("file-input_delete")&&(t.target.closest(".file-input_file").remove(),e())}),t.addEventListener("click",function(){Array.prototype.forEach.call(i.querySelectorAll(".file-input_file"),function(t){t.remove()}),l&&(n.value=null),e()})})},app.textInput=function(t){app.findWithRoot(t,"[data-text-input]").each(function(){var e=$(this),a=e.find("input"),t=e.find(".input_label"),t=$('<button class="text-input_clear" tabindex="-1" type="button" aria-label="Очистить" />').appendTo(t);if(e.is("._filter")){var i=e.find(".input_label"),n=e.find(".input_placeholder"),o=e.find(".datepicker-filter"),r=e.find(".datepicker-filter_button"),l=e.find(".datepicker-filter_datepicker, .datepicker-filter_datepicker-from, .datepicker-filter_datepicker-to"),s=e.find(":input");function d(){var t=!0;a.each(function(){t=t&&!!$(this).val()}),e.toggleClass("_value",t)}function c(){e.toggleClass("_focus",o.is("._open"))}function p(){e.toggleClass("_disabled",!!s.attr("disabled")),e.toggleClass("_readonly",!!s.attr("readonly"))}i.on("click",function(t){r.attr("disabled")||((i.is(t.target)||n.is(t.target))&&setTimeout(function(){r.trigger("click")}),t.preventDefault())}),o.on("click",function(){setTimeout(c)});try{l.each(function(){this.addEventListener("click",function(){setTimeout(c),setTimeout(d)},!0)})}catch(t){console.error(t),l.on("click",function(){d(),c()})}t.on("click",function(){o.trigger("filter-clear"),d(),c()}),app.dom.$document.on("click",function(){setTimeout(c)}),setTimeout(function(){p(),d()}),e.on("input-hook",function(t,e){d(),p(),c()})}else{function u(){e.toggleClass("_value",!!a.val()),e.toggleClass("_disabled",!!a.attr("disabled")),e.toggleClass("_readonly",!!a.attr("readonly"))}a.on("focus blur",function(t){e.toggleClass("_focus","focus"===t.type)}),a.on("input",function(){e.toggleClass("_value",!!a.val())}),a.on("change",function(){a.trigger("filter-select")}),a.on("input-hook",u),t.on("click",function(){a.val(""),a.trigger("input"),a.trigger("change"),a.trigger("focus")}),u()}})},app.select=function(t){app.findWithRoot(t,"[data-select]").each(function(){var e=$(this),t=e.find("select");function a(){e.toggleClass("_value",!!t.val()),e.toggleClass("_disabled",t.is(":disabled"))}t.on("focus blur",function(t){e.toggleClass("_focus","focus"===t.type)}),e.toggleClass("_value",!!t.val()),t.on("change",function(){e.toggleClass("_value",!!t.val()),t.trigger("filter-select")}),t.on("input-hook",a),a()})},app.radioCheckbox=function(t){app.findWithRoot(t,'.radio input[type="radio"], .checkbox input[type="checkbox"]').on("change",function(){$(this).trigger("filter-select")})},app.sorting=function(t){var a=app.findWithRoot(t,"[data-sorting]");a.length&&(a.each(function(){var t=$(this),e=t.find("[data-sorting-title]"),a=t.find("[data-sorting-close"),i=t.find("[data-sorting-direction]"),n=i.find("input"),o=t.find("[data-sorting-items]"),r=o.find("input"),l="";function s(){l=r.filter(":checked").siblings("label").text(),e.text(l),o.hide()}function d(){var t=n.val();"down"===t&&"up"===t||n.prop("value","down"),"up"!==t?i.removeClass("_active"):i.addClass("_active")}e.on("click",function(){o.toggle()}),r.filter(":checked").length||r.first().prop("checked",!0),r.on("change",s),r.on("input-hook",function(t,e){"set-attr"===e.type&&"checked"===e.attr&&s()}),s(),a.on("click",function(){o.hide()}),d(),n.on("input-hook",function(t,e){"set-value"===e.type&&d()}),i.on("click",function(){var t=$(this),e=t.hasClass("_active")?"down":"up";n.prop("value",e),t.toggleClass("_active")})}),app.dom.$document.click(function(e){a.each(function(){var t=$(this);$(e.target).closest(t).length||t.find("[data-sorting-items]").hide()})}))},app.event=function(t){var e=app.findWithRoot(t,".event_application"),a=e.parent().parent().parent();e.length&&$(window).on("scroll",function(){var t;e.is(":visible")&&(t=e.hasClass("_fixed"),a.get(0).getBoundingClientRect().bottom+e.height()*t<app.dom.$window.height()?t&&e.removeClass("_fixed"):t||e.addClass("_fixed"))})},app.monthpicker=function(t){app.findWithRoot(t,"[data-monthpicker-filter], [data-quarterpicker-filter]").each(function(){var o=$(this),r=o.find(".datepicker-filter_button"),l=o.find(".datepicker-filter_close"),t=o.find(".datepicker-filter_clear-btn"),s=o.find(".datepicker-filter_input"),d=o.find(".datepicker-filter_datepicker"),e=o.is("[data-quarterpicker-filter]"),c=e?"QuarterPicker":"MonthPicker",i=e?app.l10n[c].plugin.quarters:app.l10n[c].plugin.months.map(function(t){return t[0].toLowerCase()+t.slice(1)});function a(t){$.contains(o.get(0),t.target)||(o.removeClass("_open"),app.dom.$document.off("click",a),s.val())||o.trigger("clear-datepicker")}function p(t){var e;if(t)return 6===(t=String(t)).length&&(t="0"+t),/^\d\d(.|\/)\d\d\d\d$/.test(t)?((e=new Date).setFullYear(+t.slice(-4),+t.slice(0,2)-1,1),e):void 0}function u(t,e,a){return a=a||i[t.getMonth()]+" "+t.getFullYear(),(a=e?e.replace("$$date$$",a):a)[0].toUpperCase()+a.slice(1)}function f(t){t=t.getMonth()+1+app.l10n[c].separator+t.getFullYear();return t=6!==t.length||e?t:"0"+t}var h=o.data("date-text"),n=s.val(),g=p(s.val()),m=o.data("default-value")||n;function v(){s.prop("value",""),d.addClass("_empty"),o.addClass("_empty").removeClass("_changed _modified _open"),r.html(app.l10n[c].emptyValue),app.dom.$document.off("click",a),o.trigger("clear-datepicker"),setTimeout(function(){o.trigger("filter-select")})}(m="number"==typeof m?String(m):m)&&o.toggleClass("_modified",n!==m),g?r.html(u(g,h)):(r.html(app.l10n[c].emptyValue),o.addClass("_empty")),d[c]({i18n:app.l10n[c].plugin,Animation:"none",MinMonth:p(o.data("min-date")),MaxMonth:p(o.data("max-date")),SelectedMonth:g,MonthFormat:"mm"+app.l10n[c].separator+"yy",OnAfterChooseMonth:function(t){t=f(t);s.prop("value",t),s.trigger("input-hook",[{type:"set-value",value:t},!0])}}),s.off("input-hook").on("input-hook",function(t,e,a){var i,n;"set-value"===e.type?(n=f(i=p(e.value)),r.html(u(i,h)).removeClass("_empty"),o.removeClass("_open _empty").toggleClass("_modified",m!==n),a?s.trigger("filter-select"):d[c]("option",{SelectedMonth:i})):"set-attr"!==e.type||"disabled"!==e.attr&&"readonly"!==e.attr||(o.hasClass("_open")&&l.trigger("click"),r.attr("disabled",e.value))}),d.off("click").on("click",function(t){return t.stopPropagation(),!1}),s.data("datepickerElement",d),t.on("click",v),o.on("filter-clear",v),r.attr("disabled",!!s.is(":disabled")),r.add(l).off("click").on("click",function(){o.toggleClass("_open"),o.hasClass("_open")?(app.dom.$document.off("click",a),app.dom.$document.on("click",a),o.offset().left+o.width()/2>app.dom.$window.width()/2?o.addClass("_right"):o.removeClass("_right")):s.val()||o.trigger("clear-datepicker")})})},app.monthpickerPeriod=function(t){app.findWithRoot(t,"[data-monthpicker-period-filter], [data-quarterpicker-period-filter]").each(function(){var l,s,d,c,p=$(this),u=p.find(".datepicker-filter_button"),f=p.find(".datepicker-filter_close"),h=p.find(".datepicker-filter_apply-btn"),t=p.find(".datepicker-filter_clear-btn"),e=p.find(".datepicker-filter_modal"),i=p.find(".datepicker-filter_tab-from"),n=p.find(".datepicker-filter_tab-to"),g=p.find(".datepicker-filter_input-from"),m=p.find(".datepicker-filter_input-to"),a=p.find(".datepicker-filter_datepicker-from"),o=p.find(".datepicker-filter_datepicker-to"),r=p.is("[data-quarterpicker-period-filter]"),v=r?"QuarterPicker":"MonthPicker",_=app.l10n[v].plugin[r?"quarters":"months"],b=p.data("date-text"),y=function(t){return t};function w(t){$.contains(p.get(0),t.target)||(p.removeClass("_open"),app.dom.$document.off("click",w),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):L())}b&&(y=function(t){return b.replace("$$date$$",t)});var k=function(t){var e;if(t)return 6===(t=String(t)).length&&(t="0"+t),/^\d\d(.|\/)\d\d\d\d$/.test(t)?(t=String(t),(e=new Date).setFullYear(+t.slice(-4),+t.slice(0,2)-1,1),e):void 0},C=function(t){return t?_[t.getMonth()]+" "+t.getFullYear():"<span>"+app.l10n[v].emptyValue+"</span>"};function x(t){t=t.getMonth()+1+app.l10n[v].separator+t.getFullYear();return t=6!==t.length||r?t:"0"+t}function S(){var t=C(l),e=C(s),a=l||s?" - ":"<span> - </span>";i.html(t),n.html(e),u.html(y(t+a+e))}function L(t){l=s=void 0,g.add(m).prop("value",""),S(),p.removeClass("_changed _modified _open"),a.add(o).addClass("_empty"),a[v]("option","MaxMonth",o[v]("option","MaxMonth")),o[v]("option","MinMonth",a[v]("option","MinMonth")),a.add(o)[v]("Update"),app.dom.$document.off("click",w),p.trigger("clear-datepicker"),t&&setTimeout(function(){p.trigger("filter-select")})}function W(){p.hasClass("_open")&&(p.offset().left+2*p.outerWidth()/3>2*app.dom.$window.width()/3?"left"!==e.data("pos")&&(e.data("pos","left"),e.css("transform","translateX("+(-e.outerWidth()+u.outerWidth())+"px)")):p.offset().left+p.outerWidth()/3>app.dom.$window.width()/3?"center"!==e.data("pos")&&(e.data("pos","center"),e.css("transform","translateX("+(-e.outerWidth()+u.outerWidth())/2+"px)")):"right"!==e.data("pos")&&(e.data("pos","right"),e.css("transform","")))}function T(n,o,e,r){p.data("date-text");var t,a=k(e.val());a?(t=e.val(),r?d=p.data("default-value-from")||t:c=p.data("default-value-to")||t,r?l=a:s=a,o[v]("option",r?"MinMonth":"MaxMonth",a)):h.attr("disabled",!0),n[v]("option",{i18n:app.l10n[v].plugin,Animation:"none",MinMonth:k(p.data("min-date"))||null,MaxMonth:k(p.data("max-date"))||null,SelectedMonth:a,MonthFormat:"mm"+app.l10n[v].separator+"yy",OnAfterChooseMonth:function(t){t=x(t);e.val()!==t&&(e.prop("value",t),e.trigger("input-hook",[{type:"set-value",value:t},!0]))}}),e.off("input-hook").on("input-hook",function(t,e,a){var i;"set-value"===e.type?(x(i=k(e.value)),r?l=i:s=i,S(),W(),p.addClass("_tab-to _changed").toggleClass("_modified",d!==g.val()||c!==m.val()),n.removeClass("_empty"),o[v]("option",r?"MinMonth":"MaxMonth",i),a||n[v]("option",{SelectedMonth:i}),o[v]("Update"),l&&s&&h.removeAttr("disabled")):"set-attr"!==e.type||"disabled"!==e.attr&&"readonly"!==e.attr||(p.hasClass("_open")&&f.trigger("click"),u.attr("disabled",g.is(":disabled")||m.is(":disabled")))}),e.data("datepickerElement",n),n.off("click").on("click",function(t){return t.stopPropagation(),!1})}a.add(o)[v](),T(o,a,m,!1),T(a,o,g,!0),S(),"number"==typeof d&&(d=String(d)),"number"==typeof c&&(c=String(c)),(d||c)&&p.toggleClass("_modified",d!==g.val()||c!==m.val()),u.attr("disabled",!!g.add(m).is(":disabled")),i.on("click",function(){p.removeClass("_tab-to")}),n.on("click",function(){p.addClass("_tab-to")}),t.on("click",L),p.on("filter-clear",L),u.add(f).add(h).off("click").on("click",function(){p.toggleClass("_open"),p.hasClass("_open")?(p.removeClass("_tab-to"),app.dom.$document.off("click",w),app.dom.$document.on("click",w),W()):(e.data("pos",""),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):L())})})},app.datepicker=function(t){var m=["I","II","III"];app.findWithRoot(t,"[data-datepicker-filter], [data-decadepicker-filter]").each(function(){var n=$(this),o=n.find(".datepicker-filter_button"),r=n.find(".datepicker-filter_close"),t=n.find(".datepicker-filter_clear-btn"),l=n.find(".datepicker-filter_input"),s=n.find(".datepicker-filter_datepicker"),e=n.is("[data-decadepicker-filter]"),d=e?"decadepicker":"datepicker",a=n.data("date-text");function c(t){return e&&(t=m[t[0]-1]+t.slice(1)),t=a?a.replace("$$date$$",t):t}function i(t){$.contains(n.get(0),t.target)||(n.removeClass("_open"),app.dom.$document.off("click",i),l.val())||n.trigger("clear-datepicker")}var p=app.l10n[d].plugin.dateFormat;s[d]({yearRange:"-99:+99",changeMonth:!0,changeYear:!0,minDate:n.data("min-date"),maxDate:n.data("max-date"),dateFormat:p}),s[d]("option",app.l10n[d].plugin);try{var u=$[d].parseDate(p,l.val()),f=$[d].formatDate(p,u)}catch(t){}u?(o.html(c(f)),s[d]("setDate",u),l.prop("value",f)):(o.html(app.l10n[d].emptyValue),n.addClass("_empty"),s.addClass("_empty"));var h=n.data("default-value")||f;function g(){l.prop("value",""),s.addClass("_empty"),n.addClass("_empty").removeClass("_changed _modified _open"),o.html(app.l10n[d].emptyValue),app.dom.$document.off("click",i),n.trigger("clear-datepicker"),setTimeout(function(){n.trigger("filter-select")})}h&&n.toggleClass("_modified",f!==h),s[d]("option",{onSelect:function(t){l.prop("value",t),l.trigger("input-hook",[{type:"set-value",value:t},!0])}}),l.off("input-hook").on("input-hook",function(t,e,a){var i;"set-value"===e.type?(i=e.value,o.html(c(i)),n.removeClass("_empty _open").toggleClass("_modified",i!==h),s.removeClass("_empty"),l.trigger("filter-select"),a||s[d]("setDate",u)):"set-attr"!==e.type||"disabled"!==e.attr&&"readonly"!==e.attr||(n.hasClass("_open")&&r.trigger("click"),o.attr("disabled",e.value))}),s.off("click").on("click",function(t){return t.stopPropagation(),!1}),l.data("datepickerElement",s),t.on("click",g),n.on("filter-clear",g),o.attr("disabled",!!l.is(":disabled")),o.add(r).off("click").on("click",function(){n.toggleClass("_open"),n.hasClass("_open")?(app.dom.$document.off("click",i),app.dom.$document.on("click",i),n.offset().left+n.width()/2>app.dom.$window.width()/2?n.addClass("_right"):n.removeClass("_right")):l.val()||n.trigger("clear-datepicker")})})},app.datepickerPeriod=function(t){var L=["I","II","III"];app.findWithRoot(t,"[data-datepicker-period-filter], [data-decadepicker-period-filter]").each(function(){var l,s,d,c,p=$(this),u=p.find(".datepicker-filter_button"),f=p.find(".datepicker-filter_close"),h=p.find(".datepicker-filter_apply-btn"),t=p.find(".datepicker-filter_clear-btn"),e=p.find(".datepicker-filter_modal"),i=p.find(".datepicker-filter_tab-from"),n=p.find(".datepicker-filter_tab-to"),g=p.find(".datepicker-filter_input-from"),m=p.find(".datepicker-filter_input-to"),a=p.find(".datepicker-filter_datepicker-from"),o=p.find(".datepicker-filter_datepicker-to"),r=p.is("[data-decadepicker-period-filter]"),v=r?"decadepicker":"datepicker",_=p.data("date-text");function b(t){$.contains(p.get(0),t.target)||(p.removeClass("_open"),app.dom.$document.off("click",b),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):k())}function y(t){return(t=t&&r?L[t[0]-1]+t.slice(1):t)||"<span>"+app.l10n[v].emptyValue+"</span>"}function w(){var t=y(l),e=y(s),a=l||s?" - ":"<span> - </span>";i.html(t),n.html(e),u.html((t=t+a+e,t=_?_.replace("$$date$$",t):t))}function k(t){l=s=void 0,g.add(m).prop("value",""),w(),p.removeClass("_changed  _modified _open"),a.add(o).addClass("_empty"),a[v]("option","maxDate",o[v]("option","maxDate")),o[v]("option","minDate",a[v]("option","minDate")),app.dom.$document.off("click",b),p.trigger("clear-datepicker"),t&&p.hasClass("_changed")&&setTimeout(function(){p.trigger("filter-select")})}function C(){p.hasClass("_open")&&(p.offset().left+2*p.outerWidth()/3>2*app.dom.$window.width()/3?"left"!==e.data("pos")&&(e.data("pos","left"),e.css("transform","translateX("+(-e.outerWidth()+u.outerWidth())+"px)")):p.offset().left+p.outerWidth()/3>app.dom.$window.width()/3?"center"!==e.data("pos")&&(e.data("pos","center"),e.css("transform","translateX("+(-e.outerWidth()+u.outerWidth())/2+"px)")):"right"!==e.data("pos")&&(e.data("pos","right"),e.css("transform","")))}var x=app.l10n[v].plugin.dateFormat;function S(n,o,e,r){n[v]("option",{yearRange:"-99:+99",changeMonth:!0,changeYear:!0,minDate:p.data("min-date"),maxDate:p.data("max-date"),onSelect:function(t){t!==e.val()&&(e.prop("value",t),e.trigger("input-hook",[{type:"set-value",value:t},!0]))}}),e.off("input-hook").on("input-hook",function(t,e,a){var i;"set-value"===e.type?(i=e.value,r?l=i:s=i,w(),C(),p.addClass("_tab-to _changed").toggleClass("_modified",d!==l||c!==s),n.removeClass("_empty"),o[v]("option",r?"minDate":"maxDate",i),l&&s&&h.removeAttr("disabled"),a||n[v]("setDate",$[v].parseDate(x,i))):"set-attr"!==e.type||"disabled"!==e.attr&&"readonly"!==e.attr||(p.hasClass("_open")&&f.trigger("click"),u.attr("disabled",g.is(":disabled")||m.is(":disabled")))});try{var t=$[v].parseDate(x,e.val()),a=$[v].formatDate(x,t)}catch(t){}t?(r?l=a:s=a,r?d=p.data("default-value-from")||a:c=p.data("default-value-to")||a,o[v]("option",r?"minDate":"maxDate",t),n[v]("setDate",t)):(h.attr("disabled",!0),n.addClass("_empty"),r&&((a=new Date).setMonth(a.getMonth()-1),n[v]("setDate",a))),e.data("datepickerElement",n),n.off("click").on("click",function(t){return t.stopPropagation(),!1})}a.add(o)[v](app.l10n[v].plugin),S(o,a,m,!1),S(a,o,g,!0),w(),(d||c)&&p.toggleClass("_modified",d!==l||c!==s),u.attr("disabled",!!g.add(m).is(":disabled")),i.off("click").on("click",function(){p.removeClass("_tab-to")}),n.off("click").on("click",function(){p.addClass("_tab-to")}),t.on("click",k),p.on("filter-clear",k),u.add(f).add(h).off("click").on("click",function(){p.toggleClass("_open"),p.hasClass("_open")?(p.removeClass("_tab-to"),app.dom.$document.off("click",b),app.dom.$document.on("click",b),C()):(e.data("pos",""),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):k())})})},app.yearpickerPeriod=function(t){app.findWithRoot(t,"[data-yearpicker-period-filter]").each(function(){var e,a,n,o,r,l,s=$(this),d=s.find(".datepicker-filter_button"),c=s.find(".datepicker-filter_close"),p=s.find(".datepicker-filter_apply-btn"),t=s.find(".datepicker-filter_clear-btn"),i=s.find(".datepicker-filter_modal"),u=s.find(".datepicker-filter_tab-from"),f=s.find(".datepicker-filter_tab-to"),h=s.find(".datepicker-filter_input-from"),g=s.find(".datepicker-filter_input-to"),m=s.find(".datepicker-filter_datepicker-from"),v=s.find(".datepicker-filter_datepicker-to"),_=(m.find(".ui-yearpicker").remove(),v.find(".ui-yearpicker").remove(),$('<div class="ui-yearpicker" />').appendTo(m)),b=$('<div class="ui-yearpicker" />').appendTo(v),y=+s.data("min-date")||1970,w=+s.data("max-date")||(new Date).getFullYear();function k(t){$.contains(s.get(0),t.target)||(s.removeClass("_open"),app.dom.$document.off("click",k),r&&l?s.hasClass("_changed")&&s.trigger("filter-select"):L(),e&&h.trigger("input-hook",[{type:"set-value",value:e},!0]),a&&g.trigger("input-hook",[{type:"set-value",value:a},!0]))}function C(t){return t?t+" "+app.l10n.yearpicker.emptyValue.toLocaleLowerCase():"<span>"+app.l10n.yearpicker.emptyValue+"</span>"}function x(){var t=C(r),e=C(l),a=r||l?" - ":"<span> - </span>";u.html(t),f.html(e),d.html(t+a+e)}function S(){[_,b].forEach(function(t,e){var a=!e;t.children().each(function(){var t=+$(this).text();$(this).attr("disabled",a?l<t:t<r),$(this).toggleClass("_active",a?t===r:t===l)})})}function L(t){r=l=void 0,h.add(g).prop("value",""),x(),S(),s.removeClass("_changed _modified _open"),app.dom.$document.off("click",k),s.trigger("clear-datepicker"),t&&s.hasClass("_changed")&&setTimeout(function(){s.trigger("filter-select")})}function W(){s.hasClass("_open")&&(s.offset().left+2*s.outerWidth()/3>2*app.dom.$window.width()/3?"left"!==i.data("pos")&&(i.data("pos","left"),i.css("transform","translateX("+(-i.outerWidth()+d.outerWidth())+"px)")):s.offset().left+s.outerWidth()/3>app.dom.$window.width()/3?"center"!==i.data("pos")&&(i.data("pos","center"),i.css("transform","translateX("+(-i.outerWidth()+d.outerWidth())/2+"px)")):"right"!==i.data("pos")&&(i.data("pos","right"),i.css("transform","")))}function T(){_.add(b).find("button._active").each(function(){var t=$(this),e=t.parent(),t=t.position(),a=e.scrollTop(),i=e.height();e.scrollTop(a+t.top-i/2)})}function E(t,e){t.empty();for(var a=y;a<=w;a++)$('<button type="button" class="ui-yearpicker-item" />').text(a).appendTo(t).off("click").on("click",function(){var t=+$(this).text();e.val(t)})}function R(){E(_,h),E(b,g),S(),x()}function A(t,e,a){if("option"===t)switch(e){case"maxYear":if(!a)return w;+a?(w=+a,R(),r&&w<l&&g.val(w),l&&l<r&&h.val(l)):console.error("maxYear - expected integer value, but received",a);break;case"minYear":if(!a)return y;+a?(y=+a,r&&r<y&&h.val(y),l&&l<r&&g.val(r),R()):console.error("minYear - expected integer value, but received",a)}}function q(t,e,i){E(t,e),e.off("input-hook").on("input-hook",function(t,e){var a;"set-value"===e.type?(a=+e.value,i?r=a:l=a,x(),W(),S(),s.addClass("_changed").toggleClass("_modified",n!==r||o!==l),i&&f.is(":visible")&&f.trigger("click"),r&&l&&p.removeAttr("disabled")):"set-attr"!==e.type||"disabled"!==e.attr&&"readonly"!==e.attr||(s.hasClass("_open")&&c.trigger("click"),d.attr("disabled",e.value))});try{var a=+e.val()}catch(t){}a?i?r=a:l=a:p.attr("disabled",!0),i?n=+s.data("default-value-from")||a:o=+s.data("default-value-to")||a,e.data("datepickerElement",{yearpicker:A})}q(b,g,!1),q(_,h,!0),x(),S(),(n||o)&&s.toggleClass("_modified",n!==r||o!==l),d.attr("disabled",!!h.add(g).is(":disabled")),u.on("click",function(){s.removeClass("_tab-to"),T()}),f.on("click",function(){s.addClass("_tab-to"),T()}),t.on("click",L),s.on("filter-clear",L),d.add(c).off("click").on("click",function(){s.toggleClass("_open"),s.hasClass("_open")?(s.removeClass("_tab-to"),app.dom.$document.off("click",k),app.dom.$document.on("click",k),T(),W(),a=l,e=r):(i.data("pos",""),r&&l?s.hasClass("_changed")&&s.trigger("filter-select"):L(),h.val(e),g.val(a))}),p.off("click").on("click",function(){s.hasClass("_open")?(s.removeClass("_tab-to"),app.dom.$document.off("click",k),app.dom.$document.on("click",k),T(),W(),e=a=void 0):(i.data("pos",""),r&&l?s.hasClass("_changed")&&s.trigger("filter-select"):L()),s.toggleClass("_open")})})},app.menu=function(t){var e=app.findWithRoot(t,"[data-menu]"),a=e.find("[data-menu-item]"),i=e.find("[data-menu-item-btn]"),n=app.findWithRoot(t,"[data-menu-show]"),t=app.findWithRoot(t,"[data-menu-close]");function o(){e.removeClass("show"),n.removeClass("_active"),app.dom.$body.removeClass("menu-open")}n.on("click",function(){$(this).hasClass("_active")?o():(app.dom.$body.addClass("menu-open"),e.addClass("show"),n.addClass("_active"),$(this).trigger("open-menu"))}),t.on("click",o),i.on("click",function(){var t=$(this).closest(a);t.hasClass("_active")?t.removeClass("_active"):(a.filter("._active").removeClass("_active"),t.addClass("_active"))})},app.tableScroll=function(t){function e(t){s=!1}var i,n,a=$(".table#scroll"),o=$(".table-arrow-left"),r=$(".table-arrow-right"),l=$(".table_services"),s=!1;a.on("mousemove",function(t){t.preventDefault();var e=t.originalEvent,a=t.currentTarget;s&&(e=e.pageX-t.currentTarget.offsetLeft-i,t.currentTarget.scrollLeft=n-e,a.scrollLeft===a.scrollWidth-a.offsetWidth?r.addClass("hide"):r.removeClass("hide"),0===a.scrollLeft?(o.addClass("hide"),l.removeClass("border-right")):(o.removeClass("hide"),l.addClass("border-right")))}),a.on("mousedown",function(t){s=!0,i=t.originalEvent.pageX-t.currentTarget.offsetLeft,n=t.currentTarget.scrollLeft}),a.on("mouseup",e),a.on("mouseleave",e),r.on("click",function(t){var e=$(t.currentTarget).parent().find("#scroll");e.animate({scrollLeft:e.scrollLeft()+e.width()},{complete:function(){(e.scrollLeft()===e[0].scrollWidth-e[0].offsetWidth?(r.addClass("hide"),o):r).removeClass("hide")}})}),o.on("click",function(t){var e=$(t.currentTarget).parent().find("#scroll");e.animate({scrollLeft:e.scrollLeft()-e.width()},{complete:function(){(0===e.scrollLeft()?(o.addClass("hide"),r):o).removeClass("hide")}})})},app.size=function(t){var a=app.findWithRoot(t,"[data-size]"),i=$("[data-table]"),n=$(".table"),e=app.findWithRoot(t,".size-switch_icon"),o=app.findWithRoot(t,".table-copy"),r=app.findWithRoot(t,".base-popup_copy");o.off("click").on("click",function(){o.addClass("active"),setTimeout(function(){o.removeClass("active")},3e3)}),r.off("click").on("click",function(){r.addClass("active"),setTimeout(function(){r.removeClass("active")},3e3)}),e.off("click").on("click",function(){var t=$(event.target);t.hasClass("active")?t.removeClass("active"):t.addClass("active")}),a.off("click").on("click",function(t){var e=$(t.target);n.removeClass("small large medium"),n.addClass(t.target.dataset.size),a.removeClass("active"),e.addClass("active"),i.floatThead("reflow")}),i.each(function(t,e){var a=$(e).parent();a.find(".clone").length||$(e).clone(!0).appendTo(a).addClass("clone")}),i.floatThead({responsiveContainer:function(t){return t.parent()},debug:!0,zIndex:10,position:"fixed"})},app.updateTableHeader=function(){$("[data-table]").floatThead("reflow")},app.filters=function(t){var i=app.findWithRoot(t,"[data-filter]"),u=i.find("[data-filter-title]"),e=i.find("[data-filter-close]"),n=i.find("[data-filter-content]"),a=app.findWithRoot(t,"form[data-auto-submit]"),o=i.filter('[data-filter="select"]'),r=i.filter('[data-filter="switch"]'),t=app.findWithRoot(t,"[data-select-with-date]"),l=i.filter('[data-filter="checkboxes"]'),s=i.find(".home-region"),f=($(".geo-city__arrow"),$("#filter-select--home-region")),h=$(".geo-city__link");function d(t){return Math.ceil(t.innerWidth())<Math.floor(t[0].scrollWidth)}function g(t,e){d(t)?(t.attr("data-tooltip-content",e),t.removeAttr("data-tooltip-disabled")):t.attr("data-tooltip-disabled","")}if(s.each(function(t,e){var a=e.getAttribute("data-select-home");""!==a&&(e.style.display="block",e.textContent=a)}),window.localStorage)try{var c=JSON.parse(localStorage.getItem("submit-scroll"));c&&c.pathname===location.pathname&&app.dom.$window.scrollTop(c.scrollTop),localStorage.removeItem("submit-scroll")}catch(t){}a.off("filter-select").on("filter-select",function(){window.localStorage&&localStorage.setItem("submit-scroll",JSON.stringify({pathname:location.pathname,scrollTop:app.dom.$window.scrollTop()})),$(this).submit()}),e.off("click").on("click",function(){m($(this).closest(i))}),u.off("click").on("click",function(t){var e=$(this),a=e.closest(i);a.hasClass("open")?a.find(n).hide():(a.find(n).show(),a.find(".filter-select_search").length&&a.find(".filter-select_search input").prop("value","").trigger("input").focus()),e.toggleClass("filter_title_custom-supper"),a.toggleClass("open")});var p=document.querySelector("[data-filter-title]");function m(t,e){!e&&t.data("modified")&&t.trigger("filter-select"),t.removeClass("open").find(n).hide()}function v(t){return t.contents().filter(function(){return 3===this.nodeType}).first()}p&&window.addEventListener("click",function(t){t.target!==p&&p.classList.remove("filter_title_custom-supper")}),app.dom.$document.click(function(a){i.each(function(){var t=$(this),e=$(".geo-city__arrow");$(a.target).closest(t).length||m(t),e&&e.removeClass("geo-city__arrow_rotate")})}),r.each(function(){var e=$(this),t=e.find("label:eq(0)"),a=e.find("div:first-child:eq(0)"),i=t.text().trim(),n=e.find("input"),o=e.is("[data-default-value]");function r(t){$(t.target).trigger("filter-select"),e.toggleClass("_changed",o!==n.is(":checked"))}e.is("[data-tooltip-content]")||e.attr("data-tooltip-content",i),d(a)||t.removeAttr("title"),e.toggleClass("_changed",o!==n.is(":checked")),n.on("change",r),n.on("input-hook",r)}),t.on("select-date",function(t,e,a){var i=$(this);i.addClass("_date").data("last-checked",e),a||setTimeout(function(){i.find(".datepicker-filter_button").trigger("click")},0)}),t.on("clear-datepicker",function(){function t(t){t.stopPropagation()}var e=$(this),a=e.find('[data-filter="select"]'),i=a.data("default-value"),a=("number"==typeof(i=void 0===i?a.find("input:radio:eq(0)").val():i)&&(i=String(i)),a.find('input:radio[value="'+i+'"]')),i=e.data("last-checked")||a;e.removeClass("_date"),i.prop("checked",!0).on("filter-select",t),e.find('[data-filter="select"]').removeClass("_changed"),setTimeout(function(){e.off("filter-select",t)})}),jQuery.expr[":"].Contains=function(t,e,a){return-1!==(t.textContent||t.innerText||"").toUpperCase().indexOf(a[3].toUpperCase())},o.each(function(){var a,i,n,o,r,l=$(this),s=l.find(u),t=l.find('input[type="radio"]'),d="",c=null,e=l.find(".filter-select_search input");function p(t,e,a){f&&"filter_city_0"!==$(a).attr("id")&&(f.css({display:"block"}),a=(a||t).attr("data-region-href"),h.attr("href",a),f.attr("data-home-href",a),h.css({display:"flex"}),f.attr("data-select-home",e),t=f.attr("data-select-home"),f.text(t))}t.filter(":checked").length||t.first().prop("checked",!0),c=t.filter(":checked").siblings("label"),d=c.text(),c.find(".filter-select_option_text").length&&(d=d.replace(c.find(".filter-select_option_text").text(),"")),"no-change"!==s.attr("data-filter-title")&&s.text(d),p(l,d,t.filter(":checked")),g(s,d),l.removeAttr("title"),a=t.filter(":checked:eq(0)"),n=a.val(),"number"==typeof(i=void 0===(i=l.data("default-value"))?n:i)&&(i=String(i)),l.toggleClass("_changed",i!==a.val()),a.is("[data-select-date]")&&a.trigger("select-date",[null,!0]),l.on("change",function(t,e){($this=$(t.target)).is("input:radio")&&(Array.from(a.parents("[data-disable-checked]")).length&&a.prop("checked",!0),c=$this.siblings("label"),d=c.text(),c.find(".filter-select_option_text").length&&(d=d.replace(c.find(".filter-select_option_text").text(),"")),"no-change"!==s.attr("data-filter-title")&&(s.text(d),g(s,d)),p($this,d),l.toggleClass("_changed",i!==$this.val()),l.data("modified",!$this.is("[data-select-date]")&&n!==$this.val()),m(l,$this.is("[data-select-date]")||!!e),$this.is("[data-select-date]"))&&$this.trigger("select-date",[a])}),e.length&&(o=l.find(".filter-select_search_empty"),r=null,e.off("input").on("input",function(t){var e=l.find(".filter-select_option"),a=$(this).val(),i=$(".filter-select_options");return a?(r=e.find("label:Contains("+a+")").closest(".filter-select_option"),e.not(r).hide(),r.show(),r.length?(o.hide(),i.removeClass("filter-select_options-hidden")):(o.show(),i.addClass("filter-select_options-hidden")),r.each(function(){var t=$(this).find("label");t.html(t.html().replace(/<b>([^<]*)<\/b>/gi,"$1")),t.html(t.html().replace(new RegExp(a,"i"),"<b>$&</b>"))})):(e.each(function(){var t=$(this).find("label");t.html(t.html().replace(/<b>([^<]*)<\/b>/gi,"$1"))}),o.hide(),i.removeClass("filter-select_options-hidden"),e.show()),!1}))}),l.each(function(){var t,e,a=$(this),i=a.find(u),n=a.find("[data-filter-btn]"),o=a.find("[data-filter-counter]"),r=a.find(".filter_placeholder"),l=a.find("input"),s=0,d=r.text();function c(){return a.find("input").filter(":checked").map(function(){return $(this).attr("value")}).get().join()}function p(){s=a.find("input").filter(":checked").length||"",o.text(s),v(i).replaceWith(s?app.l10n.filter.selected:d),a.toggleClass("_changed",t!==c()),r.toggleClass("_hide",!s),a.data("modified",e!==c())}s=l.filter(":checked").length||"",o.text(s),v(i).replaceWith(s?app.l10n.filter.selected:d),r.toggleClass("_hide",!s),37<d.length?(i.attr("data-tooltip-content",d),i.removeAttr("data-tooltip-disabled")):i.attr("data-tooltip-disabled",""),e=c(),"number"==typeof(t=void 0===(t=a.data("default-value"))?e:t)&&(t=String(t)),a.toggleClass("_changed",t!==c()),a.on("change",p),a.on("input-hook",p),n.on("click",function(){m(a)})})},app.orgStructure=function(t){app.findWithRoot(t,".org-structure_el_icon, .org-structure_el_position:not(a)").on("click",function(){var t=$(this).closest(".org-structure_el"),e=t.find(".org-structure_list");t.hasClass("open")?(1==e.children().length&&t.removeClass("deep"),t.removeClass("open").find(".org-structure_el").removeClass("open").parent(".org-structure_list").removeClass("has-open-child"),t.parent(".org-structure_list").removeClass("has-open-child")):(t.addClass("open"),t.parent(".org-structure_list").addClass("has-open-child"))});var a=app.findWithRoot(t,".org-structure"),e=a.find(".org-structure_search input"),i=a.find(".org-structure_main"),n=app.findWithRoot(t,".org-structure_el_position, .org-structure_el_name"),o=".org-structure_el, .org-structure_main";Array.from(i.find(".org-structure_el.deep")).forEach(function(t){var e=t.querySelector(".org-structure_list");e&&1==e.children.length&&(t.classList.add("open"),t.classList.remove("with-childs"))}),e.on("input",function(){a.find(o).removeClass("_visible open"),n.each(function(){$(this).html($(this).html().replace(/<mark>([^<]*)<\/mark>/gi,"$1"))});var t,e=$(this).val();3<=e.length?(i.addClass("_onsearch"),e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(e,"ig"),n.filter(function(){return t.test($(this).html())}).each(function(){$(this).addClass("_visible").html($(this).html().replace(t,"<mark>$&</mark>")).parentsUntil(a,o).addClass("_visible").filter(":not(:eq(0))").addClass("open")})):i.removeClass("_onsearch")})},app.calendar=function(t){var e,a,i,n,o=app.findWithRoot(t,".calendar_weekdays"),r=o.parent(),l=app.findWithRoot(t,".excursion_submit"),s=l.parent();o.length&&l.length&&((e=function(){if(!r.length)return!1;var t=r[0].getBoundingClientRect(),t=(t.top>app.dom.$header.height()||t.bottom<o.outerHeight()?o.removeClass("_fixed").width(""):t.top<=0&&o.addClass("_fixed").width(t.width),s[0].getBoundingClientRect());t.bottom-app.dom.$window.height()+l.outerHeight()<=0?l.removeClass("_fixed").width(""):0<=t.bottom-app.dom.$window.height()&&l.addClass("_fixed").width(t.width)})(),app.dom.$window.on("scroll",e),app.dom.$window.on("resize",function(){o.hasClass("_fixed")&&o.width(r.width()),l.hasClass("_fixed")&&l.width(s.width())}),a=app.findWithRoot(t,"input.calendar_time_input"),i=app.findWithRoot(t,"input.excursion_submit_captcha_input"),n=app.findWithRoot(t,"input.excursion_submit_button"),a.add(i).on("change input",function(){var t=a.is(":checked");t&&l.addClass("_active"),t&&i.val()?n.attr("disabled",!1):n.attr("disabled",!0)}))},app.ajaxNews=function(t){var n=1;app.findWithRoot(t,"[data-news-ajax-url]").click(function(){var e=$(this),a=e.prev(),t=e.data("news-ajax-url"),i=0<=t.indexOf("?")?"&":"?";t+=i+"page="+n++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="news _in-feed col-md-17'+(t.big?" _big":"")+(t.video?" _with-video":"")+'"><div class="news_inner"'+(t.big?' style="background-image: url('+t.image+');"':"")+'><div class="news_text"><div class="news_info"><div class="news_date">'+t.date+'</div><div class="news_category">'+t.category+'</div></div><div class="news_title"><a href="'+t.href+'">'+t.title+"</a></div></div>"+(t.image?'<a href="'+t.href+'" class="col-md-5 offset-md-1 news_image"><img src="'+t.image+'" /></a>':"")+"</div></div>").appendTo(a)}),a.trigger("new-html"),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxPreviews=function(n){var o=1;app.findWithRoot(n,"[data-previews-ajax-url]").click(function(){var e=$(this),a=app.findWithRoot(n,"#previews-ajax-container"),t=e.data("previews-ajax-url"),i=0<=t.indexOf("?")?"&":"?";t+=i+"page="+o++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="home-previews_day">  \t<div class="home-previews_day-date">'+t.date+"</div>"+t.elements.map(function(t){return'<div class="home-previews_item">  <div class="row flex-md-nowrap">    <div class="col-md-2">      <div class="home-previews_item-time">'+t.time+'</div>    </div>    <div class="home-previews_item-title">      <a href="'+t.href+'">'+t.title+"</a>    </div>"+(t.important?'<div class="home-previews_item-icon offset-md-1 icon-important"></div>':"")+'  </div>  <div class="offset-md-2 row home-previews_item-source_wrap">    <div class="home-previews_item-source">'+t.source+"</div>  </div></div>"}).join("")+"   </div></div>").appendTo(a)}),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxAbout=function(t){var i=1;app.findWithRoot(t,"[data-about-ajax-url]").click(function(){var e=$(this),t=e.data("about-ajax-url"),a=0<=t.indexOf("?")?"&":"?";t+=a+"page="+i++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="document-regular">  <div class="document-regular_inner">    <div class="document-regular_top">      <div class="document-regular_left_icon"></div>      <div class="document-regular_date">'+t.date+'</div>    </div>    <div class="body-2 document-regular_main">      <div class="document-regular_texts">        <div class="document-regular_name">        \t<a href="'+t.link+'"><span class="document-regular_name_visible">'+t.text+'</span></a>        </div>        <div class="document-regular_comment"></div>      </div>    </div>  </div></div>').insertBefore(e)}),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxCross=function(t){$(t).find("[data-cross-ajax-url]").click(function(){var a=$(this),i=a.prev(),t=a.data("cross-ajax-url");a.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"html"}).done(function(t){var t=$(t),e=(t.appendTo(i),t.data("cross-ajax-url"));e?a.data("cross-ajax-url",e):a.remove(),t.trigger("new-html")}).always(function(){a.attr("disabled",!1).removeClass("_loading")})})},app.shareBtn=function(t){app.findWithRoot(t,"[data-share-btn]").on("click",function(e){var a,i=$(this),n=i.next();n.toggleClass("_hide"),n.hasClass("_hide")||(a=function(t){$.contains(i.parent().get(0),t.target)||e===t||(n.addClass("_hide"),$(document).off("click",a))},$(document).on("click",a))})},app.tables=function(e){app.findWithRoot(e,"[data-table-fixed] table:first").floatThead({responsiveContainer:function(t){return t.closest("[data-table-fixed]")},debug:!0,zIndex:10,position:"fixed"});var t=$("[data-table-fixed] > table.data_dobn");!0==(-1<window.navigator.userAgent.indexOf("MSIE ")||-1<window.navigator.userAgent.indexOf("Trident/"))&&t&&$("[data-table-fixed] > table").css({"padding-top":"160px"}),app.findWithRoot(e,"table.data, table.CBRTBL").each(function(){var n=[];$(this).find("tr").each(function(){for(var i=[],t=n.length-1;0<=t;t--)n[t].span--;$(this).find("td").each(function(){var t=$(this),e=t.attr("rowspan");t.data("linked_td",$.merge([],i));for(var a=i.length-1;0<=a;a--)i[a].data("linked_td").push(t);for(a=n.length-1;0<=a;a--)0<n[a].span&&(t.data("linked_td").push(n[a].$td),n[a].$td.data("linked_td").push(t));1<(e=e||1)&&n.push({span:e,$td:t}),i.push(t),t.mouseover(function(){var t=$(this).addClass("hover").data("linked_td");if(t)for(var e=t.length-1;0<=e;e--)t[e].addClass("hover")}),t.mouseout(function(){var t=$(this).removeClass("hover").data("linked_td");if(t)for(var e=t.length-1;0<=e;e--)t[e].removeClass("hover")})})})}),app.findWithRoot(e,".table-with-documents .toggle-button").on("click",function(){$(this).toggleClass("_active").closest("tr").toggleClass("_open")}),(updateTablesWithDocuments=function(){var t=app.dom.$window.width()<1024;app.findWithRoot(e,".table-with-documents_files").each(function(){$(this).children("td:last").attr("colspan",t?$(this).find("td").length:1)})})(),app.dom.$window.resize(updateTablesWithDocuments)},app.topLine=function(t){var e=app.findWithRoot(t,"[data-top-line]"),a=Array.from(document.querySelectorAll(".table-wrapper"));e.length&&app.dom.$window.on("scroll",function(){app.dom.$window.scrollTop()>app.dom.$header.height()&&-1===app.utils.getDirection.direction&&!a.some(function(t){return app.isScrolledIntoView(t)})?(e.addClass("_show"),$("body").addClass("header-fixed")):(e.removeClass("_show"),$("body").removeClass("header-fixed"))})},app.homeMenuButton=function(t){var e=app.findWithRoot(t,".header_menu, .banner-header"),a=app.findWithRoot(t,".home-header_content, .banner-header");function i(){app.dom.$window.scrollTop()<a.outerHeight()/2?e.addClass("_white"):e.removeClass("_white")}e.length&&(i(),app.dom.$window.on("scroll",i))},app.tips=function(t){tippy("[data-tooltip], .footnote",{content:function(t){t.getAttribute("data-tooltip-content")||t.getAttribute("data-footnote")||t.title},placement:"bottom-start",onCreate:function(t){if(t.reference.title)return t.setProps({placement:"bottom"})},onShow:function(t){var e=t.reference;if(t.reference.hasAttribute("data-tooltip-disabled"))return!1;t.setContent(e.getAttribute("data-tooltip-content")||e.getAttribute("data-footnote")||e.title)},allowHTML:!0,delay:[100,500],interactive:!0,appendTo:document.body}),$(".economic-indicator_hint").click(function(t){t.preventDefault(),t.stopPropagation()})},app.tabsWithFilters=function(t){app.findWithRoot(t,".tabs_filters_wrap").each(function(){var t=$(this),e=t.find(".tabs_filters_btn"),a=t.find(".tabs_filters");a.attr("data-open-filter")&&a.show(),e.on("click",function(){$(this).toggleClass("_active"),a.toggle()})})},app.homeTabs=function(o){app.findWithRoot(o,"[data-home-tabs]").each(function(){var t=$(this),a=t.find("[data-tabs-tab]"),i=t.find("[data-tabs-mobile-selected]"),n=t.find("[data-tabs-content]");function e(t){t.preventDefault(),app.findWithRoot(o,".tabs_items").addClass("hide"),i.removeClass("_active");t=$(this);if(t.hasClass("_active"))return!1;var e=t.data("tabsTab");a.removeClass("_active").attr("aria-selected","false"),t.addClass("_active").attr("aria-selected","true"),i.text(t.text()),n.addClass("hide").filter('[data-tabs-content="'+e+'"]').removeClass("hide")}i.on("click",function(){i.toggleClass("_active"),app.findWithRoot(o,".tabs_items").toggle()}),a.on("click",e),app.onPressSpace(a,e)})},app.tabs=function(t){var e,a,t=app.findWithRoot(t,"[data-tabs]");function r(t,e){var a=t.closest("[data-tabs]"),i=a.find("[data-tabs-tab]"),n=a.find("[data-tabs-rest]"),o=a.find("[data-tabs-rest-title]"),r=a.find("[data-tabs-content]"),l=a.find("[data-tabs]");function s(){return 0===l.has($(this)).length}l.length&&(i=i.filter(s),n=n.filter(s),o=o.filter(s),r=r.filter(s)),t.hasClass("_active")&&!e||(i.removeClass("_active").attr("aria-selected","false"),t.addClass("_active").attr("aria-selected","true"),r.hide().filter('[data-tabs-content="'+t.data("tabsTab")+'"]').show().trigger("show-hidden"),!e&&/^#.+$/.test(t.attr("href"))&&(location.hash=t.attr("href")),t.closest(n).length?(n.removeClass("_open").addClass("_active"),o.text(t.text())):(n.removeClass("_open _active"),o.text(o.data("default-title"))))}t.length&&(t.each(function(){var t=$(this),e=t.find("[data-tabs-tab]"),a=e.filter("._active"),i=t.find("[data-tabs-rest]"),n=t.find("[data-tabs-rest-title]"),t=t.find("[data-tabs-content]");function o(){i.toggleClass("_open").attr("aria-expanded",Boolean(i.hasClass("_open")))}n.data("default-title",n.text()),e.on("click",function(t){t.preventDefault(),r($(this))}),app.onPressSpace(e,function(){r($(this))}),n.on("click",o),app.onPressSpace(n,o),a.length&&r(a,!0),e.on("open-tab",function(){return r($(this)),!1}),t.on("open-anchor",function(t){$(t.target);r(e.filter('[data-tabs-tab="'+$(this).data("tabsContent")+'"]'))})}),location.hash)&&(t=$('[href = "'+location.hash+'"][data-tabs-tab]')).length&&(e=t.data("tabs-tab"),a=t.closest("[data-tabs]").find('[data-tabs-content="'+e+'"]'),setTimeout(function(){a.trigger("open-anchor",[!0])},500))},app.gotoUp=function(t){app.findWithRoot(t,".gotoUp").on("click",function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)})},app.dropdown=function(t){var e=app.findWithRoot(t,".dropdown"),a=app.findWithRoot(t,".dropdown_title"),t=app.findWithRoot(t,".general-question_title"),i=a.siblings(".dropdown_content");function n(t){t.addClass("_active").attr("aria-expanded","true"),t.siblings(".dropdown_content").trigger("show-hidden")}function o(){$(this).hasClass("_active")?$(this).removeClass("_active").attr("aria-expanded","false"):n($(this))}a.length&&(a=$.merge(a,i),(a=$.merge(a,e.children().children())).on("click",o),t.on("click",o),app.onPressSpace(a,o),a.on("open-anchor",function(t){n($(this))}),i.on("open-anchor",function(t){$(t.target);$(this).trigger("show-hidden").siblings(".dropdown_title").addClass("_active").attr("aria-expanded","true")}),i.parent().on("set-dropdown-open",function(t,e){return $(this).children(".dropdown_content").toggle(e),$(this).children(".dropdown_title").toggleClass("_active",e).attr("aria-expanded",String(e)),e&&$(this).children(".dropdown_content").trigger("show-hidden"),!1}))},app.toggle=function(t){var e=app.findWithRoot(t,"[data-toggle-btn]"),i=app.findWithRoot(t,"[data-toggle-class-btn]"),n=app.findWithRoot(t,"[data-hide]");e.each(function(){var e=$(this),a=e.closest("[data-toggle]").find("[data-toggle-content]");function t(t){null!=t&&t===e.hasClass("active")||(e.toggleClass("_active").attr("aria-expanded",Boolean(e.hasClass("_active"))),a.slideToggle())}n.on("click",function(){n.parent(".tabs_items").css("display","none"),i.removeClass("_active")}),e.on("click",function(){t()}),a.on("open-anchor",function(){t(!0)})}),i.each(function(){var e=$(this),t=e.closest("[data-toggle]"),a=t.find("[data-toggle-content]").filter(function(){return $(this).closest("[data-toggle]").is(t)});function i(t){null!=t&&t===e.hasClass("active")||(t=e.data("toggleClassBtn")||"_active",e.toggleClass("_active").attr("aria-expanded",Boolean(e.hasClass("_active"))),a.toggleClass(t),a.hasClass(t)&&a.trigger("show-hidden"))}e.on("click",function(t){t.preventDefault(),i()}),a.on("open-anchor",function(){i(!0)})})},app.toggleSelectPopup=function(t){var e=app.findWithRoot(t,"[data-toggle-popup]").find("[data-toggle-content]"),a=app.findWithRoot(t,"[data-toggle-popup-class-btn]");app.findWithRoot(t,"[data-toggle-popup-class-btn]").on("click",function(){var t=$(this).data("toggleClassBtn")||"_active";$(this).toggleClass("_active"),$(this).closest("[data-toggle-popup]").find("[data-toggle-content]").toggleClass(t)}),e.length&&app.dom.$document.click(function(t){!e.is(":visible")||$(t.target).closest(e).length||$(t.target).closest(a).length||(e.removeClass("_active"),a.removeClass("_active"))})},app.helpful=function(t){app.findWithRoot(t,"[data-helpful]").each(function(){var e,t=$(this),a=t.find("[data-helpful-btn]"),i=t.siblings("[data-reason]"),n=t.siblings("[data-thankfulness]"),o=null,r=null,l=null,s=null;function d(){var t=i.find('input[type="radio"]:checked'),e=t.is(".radio_another_button")?o.val():void 0;i.trigger("dislike-reason",{value:t.val(),message:e}),i.hide(),n.show()}a.on("click",function(){var t=$(this);if(t.hasClass("_active")||t.siblings("[data-helpful-btn]").hasClass("_active"))return!1;t.siblings("[data-helpful-btn]").addClass("_disabled"),t.addClass("_active"),"no"===t.data("helpfulBtn")&&i.length&&(i.show(),o=i.find("[data-reason-another-message]"),l=i.find('input[type="radio"]').not(".radio_another_reason"),r=i.find('input[type="radio"].radio_another_reason'),s=i.find("[data-reason-another-btn]"),o.on("input",function(){e=!$.trim(o.val()),s.prop("disabled",e)}),l.on("change",d),r.on("change",function(){o.focus()}),s.on("click",function(){$(this).not(":disabled")&&d()}))})})},app.searchHelpful=function(t){app.findWithRoot(t,"[data-search-helpful]").each(function(){var t=$(this),e=t.find("[data-helpful-btn]"),a=t.siblings("[data-reason]"),i=t.siblings("[data-thankfulness]"),n=null,o=null,r=null,l=null,s=null;e.on("click",function(){var t=$(this);if(t.hasClass("_active")||t.siblings("[data-helpful-btn]").hasClass("_active"))return!1;function e(){l=!$(this).is(r)&&!$.trim(n.val()),s.prop("disabled",l)}t.siblings("[data-helpful-btn]").addClass("_disabled"),t.addClass("_active"),"no"===t.data("helpfulBtn")&&a.length&&(a.show(),n=a.find("[data-reason-another-message]"),r=a.find('input[type="radio"]').not(".radio_another_reason"),o=a.find('input[type="radio"].radio_another_reason'),s=a.find("[data-reason-another-btn]"),n.on("input",e),r.on("change",e),o.on("change",function(){n.focus(),e()}),s.on("click",function(){var t,e;$(this).not(":disabled")&&(t=a.find('input[type="radio"]:checked'),e=t.is(".radio_another_button")?n.val():void 0,a.trigger("dislike-search-reason",{value:t.val(),message:e}),a.hide(),i.show())}))})})},app.requestHelpful=function(t){app.findWithRoot(t,"[data-request-helpful]").each(function(){var t=$(this),e=t.find("[data-request-helpful-btn]"),a=t.find("[data-request-helpful-greeting]"),i=t.find("[data-reason]"),n=i.find("[data-reason-another-message]"),o=i.find('input[type="radio"].radio_another_reason'),r=(e.on("click",function(t){t.preventDefault(),a.hide(),i.show(),o.on("change",function(){n.focus()})}),a.find("[data-helpful-btn=yes]")),l=a.find("[data-helpful-btn=no]"),s=t.find("[data-request-helpful-answer=yes]"),d=t.find("[data-request-helpful-answer=no]");r.on("click",function(t){t.preventDefault(),l.hasClass("_active")||s.show()}),l.on("click",function(t){t.preventDefault(),r.hasClass("_active")||d.show()})})},app.selectItem=function(t){app.findWithRoot(t,".select_item").on("change",function(){var t=this,e=$(t).parent().parent(),a=e.find("[data-item-select]"),i=t.options.selectedIndex;e.find(".chosen_list").toggleClass("chosen_list"),a.each(function(){t.options[i].value===this.dataset.itemSelect&&this.classList.add("chosen_list")})})},app.versions=function(t){app.findWithRoot(t,"[data-versions]").each(function(){var e=$(this),n=e.find("[data-versions-toggle]"),t=e.find("[data-versions-select]"),o=e.find("[data-versions-items]"),t=(o.filter("._active").length&&t.val(o.filter("._active").data("versionsItems")),t.on("change",function(){var t=$(this).val();o.removeClass("_active").filter('[data-versions-items="'+t+'"]').addClass("_active"),a(),n.removeClass("_active"),o.filter("._active").addClass("_hidden")}),n.on("click",function(){$(this).toggleClass("_active"),o.filter("._active").toggleClass("_hidden")}),app.dom.$document.on("show-hidden",function(t){$(t.target).has(e).length&&a()}),a(),app.dom.$window.resize(a),o.filter("._active").find("[data-versions-item]._active:eq(0)"));function a(){var t=o.filter("._active"),e=t.find("[data-versions-item]"),a=t.width(),i=0;e.each(function(){i+=$(this).outerWidth(!0)}),parseInt(i)>parseInt(a)?(n.show(),t.addClass("_hidden")):(n.hide(),t.removeClass("_hidden"))}t.length&&t.offset().top-1>t.parent().offset().top&&(n.toggleClass("_active"),o.filter("._active").toggleClass("_hidden"))})},app.imageSlider=function(t){var e=app.findWithRoot(t,".image-slider_base"),t=app.findWithRoot(t,".image-slider_popup"),d=($("[data-popup-open]"),!1);function a(t,e){var a=t.find(".swiper-container"),i=t.find(".image-slider_pagination"),n=t.find(".image-slider_caption"),o=t.find(".image-slider_slide img"),r=t.find("._next"),t=t.find("._prev"),l=$("[data-popup-close]"),s=new Swiper(a,{on:{init:function(){e?n.text(o.eq(e).attr("alt")||""):n.text(o.first().attr("alt"))},slideChange:function(){n.text(o.eq(s.realIndex).attr("alt")||"")}},observer:!0,observeParents:!0,observeSlideChildren:!0,slidesPerView:1,spaceBetween:40,loop:!0,effect:"fade",preloadImages:!1,initialSlide:e||0,lazy:{loadOnTransitionStart:!0},pagination:{el:i,type:"custom",renderCustom:function(t,e,a){return e+" / "+a}},navigation:{nextEl:r,prevEl:t}});d&&l.on("click",function(){s.destroy(),d=!1})}e.each(function(){a($(this))}),t.each(function(){var e=$(this);$(document).on("click","[data-popup-open]",function(){var t=$(this).data("swiper-slide-index");d=!0,a(e,t)})})},app.materialsGall=function(t){function c(t){var e;t.length&&(e=0,t.css({"min-height":0}),t.each(function(){(currentHeight=$(this).innerHeight())>e&&(e=currentHeight)}),t.css({"min-height":e}))}app.findWithRoot(t,".materials").each(function(){var t=$(this),e=t.find(".materials_gall"),a=t.find(".materials_nav"),i=a.find("._next"),n=a.find("._prev"),o=t.find(".swiper-slide");if(!o.length)return!1;o.length<5&&a.hide();var r,l=o.first(),s=t.data("spaceBetween");var d=new Swiper(e[0],{on:{init:function(){c(t.find(".material-external"))}},slidesPerView:4,spaceBetween:s||50,navigation:{nextEl:i,prevEl:n},breakpoints:{1023:{slidesPerView:"auto",spaceBetween:16}}});$(window).resize(function(){r=1023<app.dom.$window.width()?s||l.outerWidth()/5||50:16,slidesPerView=1023<app.dom.$window.width()?4:"auto",d.params.spaceBetween=r,d.params.slidesPerView=slidesPerView,d.updateSlides(),c(t.find(".material-external"))})})},app.homeBannersGall=function(t){t=app.findWithRoot(t,"[data-home-banners-gall]");new Swiper(t[0],{slidesPerView:"auto",spaceBetween:16})},app.bannersGall=function(t){app.findWithRoot(t,"[data-banners-gall]").each(function(){var t=$(this);t.find(".swiper-slide"),new Swiper(t[0],{slidesPerView:"auto",spaceBetween:16})})},app.homeContentAnimation=function(t){var a=app.findWithRoot(t,".home-content");if(!a.length)return!1;var e,i=app.findWithRoot(t,".home-header_shadow");function n(){var t=$(document).scrollTop();t<=2400&&o(t)}function o(t){var e=150*Math.min(t/400,1)-150;a.css({transform:e?"translate(0,"+e+"px)":""}),i.css({"box-shadow":"0px 400px 0px 400px rgba(0,0,0,"+(1-Math.min(t/400,1))+")"})}setTimeout(function(){o($(document).scrollTop())}),app.dom.$window.scroll(function(){n(),clearTimeout(e),e=setTimeout(n,500)})},app.homeHeaderGall=function(t){var e,a,i,n,o,r,l,s,d,c,p,u,f,h,g=app.findWithRoot(t,".home-header"),m=app.findWithRoot(t,".home-header_gall");return!!m.length&&(e=(a=app.findWithRoot(t,".home-header_nav_btns")).find("._next"),a=a.find("._prev"),i=app.findWithRoot(t,".home-header_nav_progress_bar"),n=app.findWithRoot(t,"[data-home-search]"),o=app.findWithRoot(t,".home-header_search_inp"),r=null,l=0,s=!5e3,d=m.hasClass("_no-autoplay"),c=app.findWithRoot(t,".home-header_main._desktop .swiper-slide"),p="",d&&i.parent().addClass("hidden-content"),c.each(function(){p=p+'<div class="swiper-slide">\n              <div class="home-header_gall_slide" style="background-image:url('+$(this).data("backgroundImage")+');"></div>\n            </div>'}),$('<div class="home-header_gall_wrap">\n        <div class="swiper-container home-header_photo_gall">\n          <div class="swiper-wrapper">\n'+p+"          </div>\n        </div>\n      </div>").prependTo(".home-header"),c.length<2?(g.addClass("_one-slide"),!1):(u=new Swiper(app.findWithRoot(t,".home-header_photo_gall")[0],{slidesPerView:1,initialSlide:0,loop:!0}),n.css("opacity",0),f=!0,h=new Swiper(m[0],{slidesPerView:1,loop:!0,effect:"fade",initialSlide:0,simulateTouch:!1,autoplay:!d&&{delay:5e3,disableOnInteraction:!1},on:{progress:v,slideChange:function(){var t;h&&((t=0===h.realIndex)!==f&&(t||n.removeClass("_hide"),n.animate({opacity:t?0:1},150,function(){t&&n.addClass("_hide")}),f=t),u.slideTo(h.realIndex+1))}},navigation:{nextEl:e,prevEl:a},pagination:{el:".home-header_nav_pag",type:"custom",renderCustom:function(t,e,a){return e+" / "+a}}}),m.on("mouseover",".home-header_nav_btns",_),m.on("mouseout",".home-header_nav_btns",_),m.on("focus",".home-header_search_inp",_),void m.on("blur",".home-header_search_inp",function(){o.val()||(s=!1,h.autoplay.start(),v())})));function v(){if(s)return!1;clearInterval(r),l=0,r=setInterval(function(){l=Math.min(l+1,100),i.css({width:l+"%"})},50)}function _(){s=!0,h.autoplay.stop(),clearInterval(r),i.css({width:0})}},app.homeHeaderGallMobile=function(t){var e=app.findWithRoot(t,".home-header"),a=app.findWithRoot(t,".home-header_gall_mobile"),i=null,n=0,o=a.hasClass("_no-autoplay"),r=null,l=a.find(".swiper-pagination"),s=app.findWithRoot(t,".home-header_main._mobile .swiper-slide"),d="";if(0===s.length)return e.addClass("_no-mobile-slider"),!1;s.each(function(){d=d+'<div class="swiper-slide">\n              <div class="home-header_gall_slide" style="background-image:url('+$(this).data("backgroundImage")+');"></div>\n            </div>'});var c=$('<div class="home-header_gall_wrap _mobile">\n        <div class="swiper-container home-header_photo_gall _mobile">\n          <div class="swiper-wrapper">\n'+d+"          </div>\n        </div>\n      </div>");if(1===s.length)return e.addClass("_one-slide-mobile"),!1;c.prependTo(".home-header");var p=new Swiper(app.findWithRoot(t,".home-header_photo_gall._mobile")[0],{slidesPerView:1,loop:!0}),u=new Swiper(a[0],{slidesPerView:1,loop:!0,effect:"fade",autoplay:!o&&{delay:5e3,disableOnInteraction:!1},on:{slideChange:function(){u&&(p.slideTo(u.realIndex+1),r)&&a.find(".swiper-pagination-bullet-active").append(r)},progress:f,init:function(){setTimeout(function(){r=$('<span class="pagination-progress" />'),a.find(".swiper-pagination-bullet-active").append(r),f(),o&&l.addClass("_noProgress")},200)}},pagination:{el:l}});function f(){if(!r)return!1;clearInterval(i),n=0,i=setInterval(function(){n=Math.min(n+1,100),r.css({width:n+"%"})},50)}},app.openAnchor=function(t){var e;app.findWithRoot(t,'a[href *= "#"]').not('[href $= "#"]').on("click",function(t){var e=$(this).attr("href").replace(/^[^#]*/,""),e=$(e);e.length&&e.trigger("open-anchor",[!0])}),app.dom.$document.on("open-anchor",function(t,e){e&&(e=$(t.target),$("html, body").animate({scrollTop:e.offset().top-app.dom.$window.height()/2},500))}),location.hash&&location.hash.match(/^#[a-z][0-9-_:\.a-z]*$/gim)&&(e=$(location.hash)).length&&setTimeout(function(){e.trigger("open-anchor",[!0])},500)},app.rouble=function(t){app.findWithRoot(t,".ruble_download_buffer_link").on("click",function(t){var e;t.preventDefault(),t=".ruble_symbol",e=$("<input>"),$("body").append(e),e.val($(t).text()).select(),document.execCommand("copy"),e.remove()})},app.searchForm=function(e){var t,a=app.findWithRoot(e,"[data-search-form]"),i=a.find("[data-search-form-input]"),n=a.find("[data-search-form-btn]"),o=app.findWithRoot(e,"[data-search-form-show]");$.trim(i.val())||n.prop("disabled",!0),i.keyup(function(){t=!$.trim(i.val()),n.prop("disabled",t)}),o.on("click",function(t){t.preventDefault(),app.dom.$body.addClass("blackout"),app.findWithRoot(e,"[data-menu-close]").trigger("click"),a.show()}),app.dom.$document.click(function(t){!a.is(":visible")||$(t.target).closest(a).length||$(t.target).closest(o).length||(app.dom.$body.removeClass("blackout"),a.hide())})},app.textareaCounter=function(t){app.findWithRoot(t,"textarea[maxlength], textarea[data-maxlength], textarea[data-val-maxlength-max]").each(function(){var e=$(this),a=parseInt(e.attr("maxlength")||e.data("maxlength")||e.data("val-maxlength-max"),10),i=e.val().replace(/\n/g,"\r\n").length,t=(e.removeAttr("maxlength"),a-i),n=$('<div class="textarea_counter">'+app.l10n.textarea.charsLeft+" "+t.toLocaleString(app.l10n.locales)+"</div>");function o(){var t=0;(i=e.val().replace(/\n/g,"\r\n").length)<=a?(t=a-i,n.text(app.l10n.textarea.charsLeft+" "+t.toLocaleString(app.l10n.locales))):(t=i-a,n.text(app.l10n.textarea.extraChars+" "+t.toLocaleString(app.l10n.locales)))}n.insertAfter(e),o(),e.on("input",o),e.on("input-hook",o),e.on("change",function(){e.trigger("filter-select")})})},app.addField=function(t){var i=app.findWithRoot(t,"[data-add-field]");i.each(function(){var t=$(this),e=t.find("[data-add-field-items]"),a=t.find("[data-add-field-template]");t.find("[data-add-field-btn]").on("click",function(t){t.preventDefault(),a.clone().attr("data-text-input","").appendTo(e).removeAttr("data-add-field-template").trigger("new-html")}),i.on("click","[data-add-field-delete]",function(){$(this).closest(".add-field_template").remove()})})},app.export=function(t){var e=app.findWithRoot(t,".b-export");app.findWithRoot(t,"button.b-export_button").on("click",function(t){t.preventDefault();t=$(this).closest(e);t.toggleClass("_open"),t.hasClass("_open")&&(t.offset().left+t.width()/2>app.dom.$window.width()/2?t.addClass("_right"):t.removeClass("_right"))}),$(document).click(function(t){e.each(function(){0===$(this).has(t.target).length&&$(this).removeClass("_open")})})},app.imageZoom=function(t){OpenSeadragon($.extend({id:"imageZoom",prefixUrl:"/common/images/openseadragon/",autoHideControls:!1,showFullPageControl:!1,minZoomImageRatio:.1},t))},app.AddItemInMenu=function(t){var t=app.findWithRoot(t,".dropdownBtnBlock"),e=t.find(".dropdownBtn"),t=t.find(".dropdown-close");e.on("click",function(){$(this).siblings(".dropdown-content").toggle("show")}),t.on("click",function(){$(this).parent(".dropdown-content").toggle("show")})},app.tabsWidthCheckingUnit=function(t){function e(){var t=r.getBoundingClientRect().left+d.getBoundingClientRect().left,e=r.getBoundingClientRect().right+d.getBoundingClientRect().right,a=r.getBoundingClientRect().left+c.getBoundingClientRect().left,i=r.getBoundingClientRect().right+c.getBoundingClientRect().right,n=(window.pageYOffset,window.pageXOffset+document.documentElement.clientWidth),o=window.pageXOffset+document.documentElement.clientWidth;document.documentElement.clientHeight,n<e&&t<o?s.hide():s.show(),n<i&&a<o?l.hide():l.show()}var r=document.querySelector(".tabs"),l=app.findWithRoot(t,".tabs_filters_wrap .arrow__left"),s=app.findWithRoot(t,".tabs_filters_wrap .arrow__right"),t=$(".tabs"),d=t.children().get(-1),c=t.children().get(0);null!=r&&(r.addEventListener("scroll",function(t){e()}),e())},app.isScrolledIntoView=function(t){t=(t="function"==typeof jQuery&&t instanceof jQuery?t[0]:t).getBoundingClientRect();return 0<=t.bottom&&0<=t.right&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)},app.accordionTable=function(t){var e,a,i,r=app.findWithRoot(t,"[data-accordion-table]");r.length&&(e=r.find("[data-accordion-head]"),a=r.closest(".table-wrapper"),i=0,$(window).on("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop,o=app.isScrolledIntoView(a);(t<i||!o)&&e.removeClass("fixed"),i=t<=0?0:t,e.each(function(t,e){var a,e=$(e),i=e.find(".table-arrow"),n=e.data("accordionHead"),n=n&&Array.from(document.querySelectorAll('tr[data-accordion-content="'+n+'"]'));i.hasClass("_active")&&o&&n&&(e.removeClass("fixed"),!app.isScrolledIntoView(e))&&n.some(function(t){return app.isScrolledIntoView(t)})&&(e.addClass("fixed"),a=r.find("[data-accordion-head]:not(.fixed)"),e.css("width",a.width()+"px"),e.children().each(function(t,e){$(e).css("width",a.children()[t].clientWidth+"px")}))})}),e.on("click",function(t){var e=(e=$(t.currentTarget).data("accordionHead"))&&$("[data-accordion-content="+e+"]"),i=$(t.currentTarget).find(".table-arrow");e&&e.each(function(t,e){var a,e=$(e);e.hasClass("_active")?(a=i,e.removeClass("_active").attr("aria-expanded","false").hide(),a.removeClass("_active")):(a=i,e.addClass("_active").attr("aria-expanded","true").show(),a.addClass("_active"))})}))},app.dropDownRow=function(t){var e=app.findWithRoot(t,"[data-show-row]");app.findWithRoot(t,"[data-dropdown-row]");e.each(function(t,i){$(i).on("click",function(t){$(i).toggleClass("active");var e=i.getAttribute("data-show-row"),a=$("[data-dropdown-row="+e+"]");a.each(function(t,e){a.length-1===t&&$(a[t]).addClass("row_border")}),a.toggleClass("row_show")})})},app.hidingContentTable=function(t){var e=Array.from(document.querySelectorAll(".tr-content")),n=[],a=!1;function i(){e.forEach(function(e){e.querySelectorAll(".tr-content__hiding, .tr-content__disclosure").forEach(function(t){t.classList.remove("tr-content__hiding"),t.classList.add("tr-content__disclosure");t=e.querySelector(".arrow-table__down");t&&t.classList.add("js-up")})}),a=!0}e.forEach(function(e){e.addEventListener("click",function(t){var a=e;(a.querySelectorAll(".tr-content__hiding").length?a.querySelectorAll(".tr-content__hiding"):a.querySelectorAll(".tr-content__disclosure")).forEach(function(t){var e;t.classList.contains("tr-content__hiding")?(t.classList.remove("tr-content__hiding"),t.classList.add("tr-content__disclosure"),(e=a.querySelector(".arrow-table__down"))&&e.classList.add("js-up")):t.classList.contains("tr-content__disclosure")&&(t.classList.add("tr-content__hiding"),t.classList.remove("tr-content__disclosure"),e=a.querySelector(".arrow-table__down"))&&e.classList.remove("js-up")})})});var o=document.querySelector(".js-toggle-all");o&&o.addEventListener("click",function(){a?(e.forEach(function(e){e.querySelectorAll(".tr-content__hiding, .tr-content__disclosure").forEach(function(t){t.classList.add("tr-content__hiding"),t.classList.remove("tr-content__disclosure");t=e.querySelector(".arrow-table__down");t&&t.classList.remove("js-up")})}),a=!1):i()}),window.addEventListener("beforeprint",function(){n=e.map(function(t){return null!==t.querySelector(".tr-content__hiding")}),i(),document.querySelector(".table-filter__switch-row").style.display="none"}),window.addEventListener("afterprint",function(){e.forEach(function(a,t){var e=a.querySelectorAll(".tr-content__hiding, .tr-content__disclosure"),i=n[t];e.forEach(function(t){var e;i?(t.classList.add("tr-content__hiding"),t.classList.remove("tr-content__disclosure"),(e=a.querySelector(".arrow-table__down"))&&e.classList.remove("js-up")):(t.classList.remove("tr-content__hiding"),t.classList.add("tr-content__disclosure"),(e=a.querySelector(".arrow-table__down"))&&e.classList.add("js-up"))})}),document.querySelector(".table-filter__switch-row").style.display="block"})},app.clickOnHref=function(t){var e=app.findWithRoot(t,"[data-open-href]"),a=app.findWithRoot(t,"[data-region-href]"),t=app.findWithRoot(t,"[data-home-href]");e.attr("data-open-href")&&e.each(function(t,e){$(e).on("click",function(){window.open(e.dataset.openHref)})}),a.attr("data-region-href")&&a.each(function(t,e){$(e).on("click",function(){window.open(e.dataset.regionHref,"_self")})}),t.attr("data-home-href")&&t.each(function(t,e){$(e).on("click",function(){window.open(e.dataset.homeHref,"_self")})})},app.openFullscreenModal=function(t){document.body.style.overflow="hidden",t.style.display="block"};var modalCloseEvent=new Event("modalClose");app.closeFullscreenModal=function(t){t.style.display="none",document.body.style.overflow="",t.dispatchEvent(modalCloseEvent)},app.openFullscreenModal=function(t){document.body.style.overflow="hidden",t.style.display="block"},app.closeFullscreenModal=function(t){t.style.display="none",document.body.style.overflow=""},app.initFullscreenModal=function(t){document.querySelectorAll(".fullscreen-modal").forEach(function(e){e.addEventListener("click",function(t){t.stopPropagation(),"js-close-button"!==t.target.className&&!t.target.classList.contains("js-close-button")||app.closeFullscreenModal(e),"fullscreen-modal"===t.target.className&&app.closeFullscreenModal(e)})})},app.pollIdentityData=function(){return new Promise(function(e,a){var t=document.querySelector("[data-poll-identity-url]").dataset.pollIdentityUrl;fetch(t).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok "+t.statusText)}).then(function(t){e(t)}).catch(function(t){console.error("Ошибка при получении данных:",t),a(t)})})},app.allVotingCharts=[],app.initialChartsData=[],app.updateAllChartsData=function(t,e,a,i){$.ajax({url:t,method:"GET",dataType:"json"}).done(function(n){i.innerText=n.updateMessage,e.forEach(function(t){var e=t.series[0].data.map(function(e){var t=n.results.find(function(t){return t.id===e.options.id});return t?{id:e.options.id,category:e.options.category,y:t.votes,imagePath:e.options.imagePath}:e.options}),a=Math.max.apply(null,e.map(function(t){return t.y})),a=a?1.1*a:100,i=new Array(t.series[0].data.length).fill(a),e=(t.update({series:[{data:e},{data:i}]}),t.yAxis[0]);e.setExtremes(e.min,.95*a)})})},app.drawVotingChart=function(t){(app.initialChartsData=t).charts.forEach(function(e){var t=Math.max.apply(null,e.series.map(function(t){return t.y})),a=t?1.1*t:100,t=new Array(e.series.length).fill(a),i=e.series.map(function(t){return t.category});i={chart:{type:"bar",events:{load:function(){var t=this.yAxis[0];t.setExtremes(t.min,.95*a)}},height:window.innerWidth&&window.innerWidth<=768?52*e.series.length<=322?322:52*e.series.length:52*e.series.length<=416?416:52*e.series.length},tooltip:{useHTML:!0,split:!1,shared:!0,formatter:function(){var t=(this.points?this.points[0]:this).point;return'<div style="text-align:center;"><img src="'+e.series[t.index].imagePath+'" class="tooltip-image"/></div>'},positioner:function(t,e,a){var i=this.chart,n=i.plotTop,o=window.innerWidth&&window.innerWidth<=768?50:200,r=a.plotY+n,l=window.innerWidth&&window.innerWidth<=768?120:160,s="tooltip-arrow-down",i=(n+i.plotHeight<r+(e+l)+10?(r-=1.3*l,s="tooltip-arrow-up"):r+=10,r<n&&(r=a.plotY+n+10,s="tooltip-arrow-down"),Array.from(document.querySelectorAll("div.highcharts-label.highcharts-tooltip > span")));return i&&i.forEach(function(t){t.classList.remove("tooltip-arrow-up","tooltip-arrow-down"),t.classList.add(s)}),{x:o,y:r}},borderWidth:0,shadow:!1,shape:"square"},legend:{enabled:!1},xAxis:{categories:i,labels:{useHTML:!0,align:"left",reserveSpace:!0,formatter:function(){var t=this.axis.series[0].processedYData[this.pos].toLocaleString("en-US").replaceAll(","," ");return'<div class="custom-label" data-tooltip><b class="custom-label__name">'+this.value+'</b><span class="custom-label__value">'+t+"</span></div>"}},gridLineWidth:1,tickWidth:1,tickPixelInterval:10,tickLength:window&&768<=window.innerWidth?270:184,tickColor:"#E8E9EB",lineColor:"#E8E9EB"},yAxis:{title:{enabled:!1},labels:{enabled:!1},gridLineWidth:0},plotOptions:{bar:{dataLabels:{enabled:!0,format:"{point.info}",style:{fontSize:"18px"}}}},series:[{name:"Значение",data:e.series.map(function(t){return{id:t.id,imagePath:t.imagePath,y:t.y,category:t.category,color:"#0088CC"}}),enableMouseTracking:!0},{name:"Fake Series",data:t,grouping:!1,stacking:!1,showInLegend:!1,enableMouseTracking:!1,zIndex:-1,color:"#F5F5F5",states:{hover:{enabled:!1},inactive:{opacity:1}}}]},t=Highcharts.chart(e.blockId,i);app.allVotingCharts.push(t)})},window.trigger=function(){app.dom.$window.trigger("new-html")};